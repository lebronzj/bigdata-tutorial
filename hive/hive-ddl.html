<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hive 常用 DDL 操作 | BIGDATA-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/bigdata-tutorial/favicon.ico">
    <meta name="description" content="大数据教程">
    <link rel="preload" href="/bigdata-tutorial/assets/css/0.styles.9b6772c9.css" as="style"><link rel="preload" href="/bigdata-tutorial/assets/js/app.9e86c55f.js" as="script"><link rel="preload" href="/bigdata-tutorial/assets/js/4.6e5a58a7.js" as="script"><link rel="preload" href="/bigdata-tutorial/assets/js/22.661a4c0a.js" as="script"><link rel="preload" href="/bigdata-tutorial/assets/js/5.97e60065.js" as="script"><link rel="prefetch" href="/bigdata-tutorial/assets/js/10.b18536f5.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/11.d45305ad.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/12.f7ba974a.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/13.3fb367cb.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/14.f9ba6e81.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/15.92fa8d15.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/16.03a706f1.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/17.4240ccc4.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/18.47724a3c.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/19.893cd0e1.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/20.0f9c85d2.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/21.acc7f149.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/23.81ddc809.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/24.86cf02b7.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/25.1a925ec5.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/26.44a7e88b.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/27.02160541.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/28.f81d3aba.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/29.e3c8d4f1.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/30.dea331c0.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/31.3a150281.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/32.8d690ba0.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/33.1f32bcf1.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/34.45338a6d.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/35.e505a47e.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/36.5751c2c9.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/37.1270bfe7.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/38.3b5d01fa.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/39.f8cf867c.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/40.9f18e62f.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/41.10eace07.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/42.fd96f2b1.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/43.d77fd497.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/44.50436166.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/45.9f6de474.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/46.65d98cbf.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/47.8c2d3205.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/6.dd9aa758.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/7.ac8df731.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/8.83a9d945.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/9.c01c4b35.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/vendors~flowchart.8982e116.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/vendors~notification.f509967c.js">
    <link rel="stylesheet" href="/bigdata-tutorial/assets/css/0.styles.9b6772c9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bigdata-tutorial/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="BIGDATA-TUTORIAL" class="logo"> <span class="site-name can-hide">BIGDATA-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bigdata-tutorial/hive/" class="nav-link router-link-active">
  Hive
</a></div><div class="nav-item"><a href="/bigdata-tutorial/hdfs/" class="nav-link">
  Hdfs
</a></div><div class="nav-item"><a href="/bigdata-tutorial/hbase/" class="nav-link">
  Hbase
</a></div><div class="nav-item"><a href="/bigdata-tutorial/zookeeper/" class="nav-link">
  ZooKeeper
</a></div><div class="nav-item"><a href="/bigdata-tutorial/kafka/" class="nav-link">
  Kafka
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">✨ Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/bigdata-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/bigdata-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🎯 博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/bigdata-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bigdata-tutorial/hive/" class="nav-link router-link-active">
  Hive
</a></div><div class="nav-item"><a href="/bigdata-tutorial/hdfs/" class="nav-link">
  Hdfs
</a></div><div class="nav-item"><a href="/bigdata-tutorial/hbase/" class="nav-link">
  Hbase
</a></div><div class="nav-item"><a href="/bigdata-tutorial/zookeeper/" class="nav-link">
  ZooKeeper
</a></div><div class="nav-item"><a href="/bigdata-tutorial/kafka/" class="nav-link">
  Kafka
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">✨ Java系列</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/bigdata-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/bigdata-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot 教程 📚
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🎯 博客
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/bigdata-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Hive 常用 DDL 操作</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata-tutorial/hive/hive-ddl.html#一、database" class="sidebar-link">一、Database</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#查看数据列表" class="sidebar-link">查看数据列表</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#使用数据库" class="sidebar-link">使用数据库</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#新建数据库" class="sidebar-link">新建数据库</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#查看数据库信息" class="sidebar-link">查看数据库信息</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#删除数据库" class="sidebar-link">删除数据库</a></li></ul></li><li><a href="/bigdata-tutorial/hive/hive-ddl.html#二、创建表" class="sidebar-link">二、创建表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#建表语法" class="sidebar-link">建表语法</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#内部表" class="sidebar-link">内部表</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#外部表" class="sidebar-link">外部表</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#分区表" class="sidebar-link">分区表</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#分桶表" class="sidebar-link">分桶表</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#倾斜表" class="sidebar-link">倾斜表</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#临时表" class="sidebar-link">临时表</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#ctas-创建表" class="sidebar-link">CTAS 创建表</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#复制表结构" class="sidebar-link">复制表结构</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#加载数据到表" class="sidebar-link">加载数据到表</a></li></ul></li><li><a href="/bigdata-tutorial/hive/hive-ddl.html#三、修改表" class="sidebar-link">三、修改表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#重命名表" class="sidebar-link">重命名表</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#修改列" class="sidebar-link">修改列</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#新增列" class="sidebar-link">新增列</a></li></ul></li><li><a href="/bigdata-tutorial/hive/hive-ddl.html#四、清空表-删除表" class="sidebar-link">四、清空表/删除表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#清空表hive-ddl-md" class="sidebar-link">清空表hive-ddl.md</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#删除表" class="sidebar-link">删除表</a></li></ul></li><li><a href="/bigdata-tutorial/hive/hive-ddl.html#五、其他命令" class="sidebar-link">五、其他命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#describe" class="sidebar-link">Describe</a></li><li class="sidebar-sub-header"><a href="/bigdata-tutorial/hive/hive-ddl.html#show" class="sidebar-link">Show</a></li></ul></li><li><a href="/bigdata-tutorial/hive/hive-ddl.html#参考资料" class="sidebar-link">参考资料</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="hive-常用-ddl-操作"><a href="#hive-常用-ddl-操作" class="header-anchor">#</a> Hive 常用 DDL 操作</h1> <h2 id="一、database"><a href="#一、database" class="header-anchor">#</a> 一、Database</h2> <h3 id="查看数据列表"><a href="#查看数据列表" class="header-anchor">#</a> 查看数据列表</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">show</span> <span class="token keyword">databases</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="使用数据库"><a href="#使用数据库" class="header-anchor">#</a> 使用数据库</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">USE</span> database_name<span class="token punctuation">;</span>
</code></pre></div><h3 id="新建数据库"><a href="#新建数据库" class="header-anchor">#</a> 新建数据库</h3> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token punctuation">(</span><span class="token keyword">DATABASE</span><span class="token operator">|</span><span class="token keyword">SCHEMA</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> database_name   <span class="token comment">--DATABASE|SCHEMA 是等价的</span>
  <span class="token punctuation">[</span><span class="token keyword">COMMENT</span> database_comment<span class="token punctuation">]</span> <span class="token comment">--数据库注释</span>
  <span class="token punctuation">[</span>LOCATION hdfs_path<span class="token punctuation">]</span> <span class="token comment">--存储在 HDFS 上的位置</span>
  <span class="token punctuation">[</span><span class="token keyword">WITH</span> DBPROPERTIES <span class="token punctuation">(</span>property_name<span class="token operator">=</span>property_value<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">--指定额外属性</span>
</code></pre></div><p>示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span> hive_test
  <span class="token keyword">COMMENT</span> <span class="token string">'hive database for test'</span>
  <span class="token keyword">WITH</span> DBPROPERTIES <span class="token punctuation">(</span><span class="token string">'create'</span><span class="token operator">=</span><span class="token string">'heibaiying'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="查看数据库信息"><a href="#查看数据库信息" class="header-anchor">#</a> 查看数据库信息</h3> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DESC</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">[</span><span class="token keyword">EXTENDED</span><span class="token punctuation">]</span> db_name<span class="token punctuation">;</span> <span class="token comment">--EXTENDED 表示是否显示额外属性</span>
</code></pre></div><p>示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DESC</span> <span class="token keyword">DATABASE</span>  <span class="token keyword">EXTENDED</span> hive_test<span class="token punctuation">;</span>
</code></pre></div><h3 id="删除数据库"><a href="#删除数据库" class="header-anchor">#</a> 删除数据库</h3> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token punctuation">(</span><span class="token keyword">DATABASE</span><span class="token operator">|</span><span class="token keyword">SCHEMA</span><span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> database_name <span class="token punctuation">[</span><span class="token keyword">RESTRICT</span><span class="token operator">|</span><span class="token keyword">CASCADE</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>默认行为是 <code>RESTRICT</code>，如果数据库中存在表则删除失败。</li> <li>要想删除库及其中的表，可以使用 <code>CASCADE</code> 级联删除。</li></ul> <p>示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code>  <span class="token keyword">DROP</span> <span class="token keyword">DATABASE</span> <span class="token keyword">IF</span> <span class="token keyword">EXISTS</span> hive_test <span class="token keyword">CASCADE</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="二、创建表"><a href="#二、创建表" class="header-anchor">#</a> 二、创建表</h2> <h3 id="建表语法"><a href="#建表语法" class="header-anchor">#</a> 建表语法</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token punctuation">[</span><span class="token keyword">TEMPORARY</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>EXTERNAL<span class="token punctuation">]</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>db_name<span class="token punctuation">.</span><span class="token punctuation">]</span>table_name     <span class="token comment">--表名</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span>col_name data_type <span class="token punctuation">[</span><span class="token keyword">COMMENT</span> col_comment<span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">[</span>constraint_specification<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment">--列名 列数据类型</span>
  <span class="token punctuation">[</span><span class="token keyword">COMMENT</span> table_comment<span class="token punctuation">]</span>   <span class="token comment">--表描述</span>
  <span class="token punctuation">[</span>PARTITIONED <span class="token keyword">BY</span> <span class="token punctuation">(</span>col_name data_type <span class="token punctuation">[</span><span class="token keyword">COMMENT</span> col_comment<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment">--分区表分区规则</span>
  <span class="token punctuation">[</span>
    <span class="token keyword">CLUSTERED</span> <span class="token keyword">BY</span> <span class="token punctuation">(</span>col_name<span class="token punctuation">,</span> col_name<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
   <span class="token punctuation">[</span>SORTED <span class="token keyword">BY</span> <span class="token punctuation">(</span>col_name <span class="token punctuation">[</span><span class="token keyword">ASC</span><span class="token operator">|</span><span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">INTO</span> num_buckets BUCKETS
  <span class="token punctuation">]</span>  <span class="token comment">--分桶表分桶规则</span>
  <span class="token punctuation">[</span>SKEWED <span class="token keyword">BY</span> <span class="token punctuation">(</span>col_name<span class="token punctuation">,</span> col_name<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>col_value<span class="token punctuation">,</span> col_value<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>col_value<span class="token punctuation">,</span> col_value<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span>
   <span class="token punctuation">[</span>STORED <span class="token keyword">AS</span> DIRECTORIES<span class="token punctuation">]</span>
  <span class="token punctuation">]</span>  <span class="token comment">--指定倾斜列和值</span>
  <span class="token punctuation">[</span>
   <span class="token punctuation">[</span><span class="token keyword">ROW</span> FORMAT row_format<span class="token punctuation">]</span>
   <span class="token punctuation">[</span>STORED <span class="token keyword">AS</span> file_format<span class="token punctuation">]</span>
     <span class="token operator">|</span> STORED <span class="token keyword">BY</span> <span class="token string">'storage.handler.class.name'</span> <span class="token punctuation">[</span><span class="token keyword">WITH</span> SERDEPROPERTIES <span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">]</span>  <span class="token comment">-- 指定行分隔符、存储文件格式或采用自定义存储格式</span>
  <span class="token punctuation">[</span>LOCATION hdfs_path<span class="token punctuation">]</span>  <span class="token comment">-- 指定表的存储位置</span>
  <span class="token punctuation">[</span>TBLPROPERTIES <span class="token punctuation">(</span>property_name<span class="token operator">=</span>property_value<span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span>  <span class="token comment">--指定表的属性</span>
  <span class="token punctuation">[</span><span class="token keyword">AS</span> select_statement<span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">--从查询结果创建表</span>
</code></pre></div><h3 id="内部表"><a href="#内部表" class="header-anchor">#</a> 内部表</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>  <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp<span class="token punctuation">(</span>
    empno <span class="token keyword">INT</span><span class="token punctuation">,</span>
    ename STRING<span class="token punctuation">,</span>
    job STRING<span class="token punctuation">,</span>
    mgr <span class="token keyword">INT</span><span class="token punctuation">,</span>
    hiredate <span class="token keyword">TIMESTAMP</span><span class="token punctuation">,</span>
    sal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    comm <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    deptno <span class="token keyword">INT</span><span class="token punctuation">)</span>
    <span class="token keyword">ROW</span> FORMAT DELIMITED <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="外部表"><a href="#外部表" class="header-anchor">#</a> 外部表</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>  <span class="token keyword">CREATE</span> EXTERNAL <span class="token keyword">TABLE</span> emp_external<span class="token punctuation">(</span>
    empno <span class="token keyword">INT</span><span class="token punctuation">,</span>
    ename STRING<span class="token punctuation">,</span>
    job STRING<span class="token punctuation">,</span>
    mgr <span class="token keyword">INT</span><span class="token punctuation">,</span>
    hiredate <span class="token keyword">TIMESTAMP</span><span class="token punctuation">,</span>
    sal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    comm <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    deptno <span class="token keyword">INT</span><span class="token punctuation">)</span>
    <span class="token keyword">ROW</span> FORMAT DELIMITED <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">&quot;\t&quot;</span>
    LOCATION <span class="token string">'/hive/emp_external'</span><span class="token punctuation">;</span>
</code></pre></div><p>使用 <code>desc format emp_external</code> 命令可以查看表的详细信息如下：</p> <h3 id="分区表"><a href="#分区表" class="header-anchor">#</a> 分区表</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>  <span class="token keyword">CREATE</span> EXTERNAL <span class="token keyword">TABLE</span> emp_partition<span class="token punctuation">(</span>
    empno <span class="token keyword">INT</span><span class="token punctuation">,</span>
    ename STRING<span class="token punctuation">,</span>
    job STRING<span class="token punctuation">,</span>
    mgr <span class="token keyword">INT</span><span class="token punctuation">,</span>
    hiredate <span class="token keyword">TIMESTAMP</span><span class="token punctuation">,</span>
    sal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    comm <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    PARTITIONED <span class="token keyword">BY</span> <span class="token punctuation">(</span>deptno <span class="token keyword">INT</span><span class="token punctuation">)</span>   <span class="token comment">-- 按照部门编号进行分区</span>
    <span class="token keyword">ROW</span> FORMAT DELIMITED <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">&quot;\t&quot;</span>
    LOCATION <span class="token string">'/hive/emp_partition'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="分桶表"><a href="#分桶表" class="header-anchor">#</a> 分桶表</h3> <div class="language-sql extra-class"><pre class="language-sql"><code>  <span class="token keyword">CREATE</span> EXTERNAL <span class="token keyword">TABLE</span> emp_bucket<span class="token punctuation">(</span>
    empno <span class="token keyword">INT</span><span class="token punctuation">,</span>
    ename STRING<span class="token punctuation">,</span>
    job STRING<span class="token punctuation">,</span>
    mgr <span class="token keyword">INT</span><span class="token punctuation">,</span>
    hiredate <span class="token keyword">TIMESTAMP</span><span class="token punctuation">,</span>
    sal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    comm <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    deptno <span class="token keyword">INT</span><span class="token punctuation">)</span>
    <span class="token keyword">CLUSTERED</span> <span class="token keyword">BY</span><span class="token punctuation">(</span>empno<span class="token punctuation">)</span> SORTED <span class="token keyword">BY</span><span class="token punctuation">(</span>empno <span class="token keyword">ASC</span><span class="token punctuation">)</span> <span class="token keyword">INTO</span> <span class="token number">4</span> BUCKETS  <span class="token comment">--按照员工编号散列到四个 bucket 中</span>
    <span class="token keyword">ROW</span> FORMAT DELIMITED <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">&quot;\t&quot;</span>
    LOCATION <span class="token string">'/hive/emp_bucket'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="倾斜表"><a href="#倾斜表" class="header-anchor">#</a> 倾斜表</h3> <p>通过指定一个或者多个列经常出现的值（严重偏斜），Hive 会自动将涉及到这些值的数据拆分为单独的文件。在查询时，如果涉及到倾斜值，它就直接从独立文件中获取数据，而不是扫描所有文件，这使得性能得到提升。</p> <div class="language-sql extra-class"><pre class="language-sql"><code>  <span class="token keyword">CREATE</span> EXTERNAL <span class="token keyword">TABLE</span> emp_skewed<span class="token punctuation">(</span>
    empno <span class="token keyword">INT</span><span class="token punctuation">,</span>
    ename STRING<span class="token punctuation">,</span>
    job STRING<span class="token punctuation">,</span>
    mgr <span class="token keyword">INT</span><span class="token punctuation">,</span>
    hiredate <span class="token keyword">TIMESTAMP</span><span class="token punctuation">,</span>
    sal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    comm <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    SKEWED <span class="token keyword">BY</span> <span class="token punctuation">(</span>empno<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">,</span><span class="token number">88</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span>  <span class="token comment">--指定 empno 的倾斜值 66,88,100</span>
    <span class="token keyword">ROW</span> FORMAT DELIMITED <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">&quot;\t&quot;</span>
    LOCATION <span class="token string">'/hive/emp_skewed'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="临时表"><a href="#临时表" class="header-anchor">#</a> 临时表</h3> <p>临时表仅对当前 session 可见，临时表的数据将存储在用户的暂存目录中，并在会话结束后删除。如果临时表与永久表表名相同，则对该表名的任何引用都将解析为临时表，而不是永久表。临时表还具有以下两个限制：</p> <ul><li>不支持分区列；</li> <li>不支持创建索引。</li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code>  <span class="token keyword">CREATE</span> <span class="token keyword">TEMPORARY</span> <span class="token keyword">TABLE</span> emp_temp<span class="token punctuation">(</span>
    empno <span class="token keyword">INT</span><span class="token punctuation">,</span>
    ename STRING<span class="token punctuation">,</span>
    job STRING<span class="token punctuation">,</span>
    mgr <span class="token keyword">INT</span><span class="token punctuation">,</span>
    hiredate <span class="token keyword">TIMESTAMP</span><span class="token punctuation">,</span>
    sal <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    comm <span class="token keyword">DECIMAL</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
    <span class="token keyword">ROW</span> FORMAT DELIMITED <span class="token keyword">FIELDS</span> <span class="token keyword">TERMINATED</span> <span class="token keyword">BY</span> <span class="token string">&quot;\t&quot;</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ctas-创建表"><a href="#ctas-创建表" class="header-anchor">#</a> CTAS 创建表</h3> <p>支持从查询语句的结果创建表：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> emp_copy <span class="token keyword">AS</span> <span class="token keyword">SELECT</span> <span class="token operator">*</span> <span class="token keyword">FROM</span> emp <span class="token keyword">WHERE</span> deptno<span class="token operator">=</span><span class="token string">'20'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="复制表结构"><a href="#复制表结构" class="header-anchor">#</a> 复制表结构</h3> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token punctuation">[</span><span class="token keyword">TEMPORARY</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>EXTERNAL<span class="token punctuation">]</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>db_name<span class="token punctuation">.</span><span class="token punctuation">]</span>table_name  <span class="token comment">--创建表表名</span>
   <span class="token operator">LIKE</span> existing_table_or_view_name  <span class="token comment">--被复制表的表名</span>
   <span class="token punctuation">[</span>LOCATION hdfs_path<span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">--存储位置</span>
</code></pre></div><p>示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TEMPORARY</span> EXTERNAL <span class="token keyword">TABLE</span>  <span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span>  emp_co  <span class="token operator">LIKE</span> emp
</code></pre></div><h3 id="加载数据到表"><a href="#加载数据到表" class="header-anchor">#</a> 加载数据到表</h3> <p>加载数据到表中属于 DML 操作，这里为了方便大家测试，先简单介绍一下加载本地数据到表中：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 加载数据到 emp 表中</span>
<span class="token keyword">load</span> <span class="token keyword">data</span> <span class="token keyword">local</span> inpath <span class="token string">&quot;/usr/file/emp.txt&quot;</span> <span class="token keyword">into</span> <span class="token keyword">table</span> emp<span class="token punctuation">;</span>
</code></pre></div><p>其中 emp.txt 的内容如下，你可以直接复制使用，也可以到本仓库的<a href="https://github.com/heibaiying/BigData-Notes/tree/master/resources" target="_blank" rel="noopener noreferrer">resources<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 目录下载：</p> <div class="language-txt extra-class"><pre class="language-text"><code>7369	SMITH	CLERK	7902	1980-12-17 00:00:00	800.00		20
7499	ALLEN	SALESMAN	7698	1981-02-20 00:00:00	1600.00	300.00	30
7521	WARD	SALESMAN	7698	1981-02-22 00:00:00	1250.00	500.00	30
7566	JONES	MANAGER	7839	1981-04-02 00:00:00	2975.00		20
7654	MARTIN	SALESMAN	7698	1981-09-28 00:00:00	1250.00	1400.00	30
7698	BLAKE	MANAGER	7839	1981-05-01 00:00:00	2850.00		30
7782	CLARK	MANAGER	7839	1981-06-09 00:00:00	2450.00		10
7788	SCOTT	ANALYST	7566	1987-04-19 00:00:00	1500.00		20
7839	KING	PRESIDENT		1981-11-17 00:00:00	5000.00		10
7844	TURNER	SALESMAN	7698	1981-09-08 00:00:00	1500.00	0.00	30
7876	ADAMS	CLERK	7788	1987-05-23 00:00:00	1100.00		20
7900	JAMES	CLERK	7698	1981-12-03 00:00:00	950.00		30
7902	FORD	ANALYST	7566	1981-12-03 00:00:00	3000.00		20
7934	MILLER	CLERK	7782	1982-01-23 00:00:00	1300.00		10
</code></pre></div><p>加载后可查询表中数据</p> <h2 id="三、修改表"><a href="#三、修改表" class="header-anchor">#</a> 三、修改表</h2> <h3 id="重命名表"><a href="#重命名表" class="header-anchor">#</a> 重命名表</h3> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> new_table_name<span class="token punctuation">;</span>
</code></pre></div><p>示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp_temp <span class="token keyword">RENAME</span> <span class="token keyword">TO</span> new_emp<span class="token punctuation">;</span> <span class="token comment">--把 emp_temp 表重命名为 new_emp</span>
</code></pre></div><h3 id="修改列"><a href="#修改列" class="header-anchor">#</a> 修改列</h3> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token punctuation">[</span><span class="token keyword">PARTITION</span> partition_spec<span class="token punctuation">]</span> CHANGE <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> col_old_name col_new_name column_type
  <span class="token punctuation">[</span><span class="token keyword">COMMENT</span> col_comment<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">FIRST</span><span class="token operator">|</span><span class="token keyword">AFTER</span> column_name<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">CASCADE</span><span class="token operator">|</span><span class="token keyword">RESTRICT</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p>示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 修改字段名和类型</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp_temp CHANGE empno empno_new <span class="token keyword">INT</span><span class="token punctuation">;</span>

<span class="token comment">-- 修改字段 sal 的名称 并将其放置到 empno 字段后</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp_temp CHANGE sal sal_new <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>  <span class="token keyword">AFTER</span> ename<span class="token punctuation">;</span>

<span class="token comment">-- 为字段增加注释</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp_temp CHANGE mgr mgr_new <span class="token keyword">INT</span> <span class="token keyword">COMMENT</span> <span class="token string">'this is column mgr'</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="新增列"><a href="#新增列" class="header-anchor">#</a> 新增列</h3> <p>示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> emp_temp <span class="token keyword">ADD</span> <span class="token keyword">COLUMNS</span> <span class="token punctuation">(</span>address STRING <span class="token keyword">COMMENT</span> <span class="token string">'home address'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="四、清空表-删除表"><a href="#四、清空表-删除表" class="header-anchor">#</a> 四、清空表/删除表</h2> <h3 id="清空表hive-ddl-md"><a href="#清空表hive-ddl-md" class="header-anchor">#</a> 清空表hive-ddl.md</h3> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 清空整个表或表指定分区中的数据</span>
<span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> table_name <span class="token punctuation">[</span><span class="token keyword">PARTITION</span> <span class="token punctuation">(</span>partition_column <span class="token operator">=</span> partition_col_value<span class="token punctuation">,</span>  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>目前只有内部表才能执行 TRUNCATE 操作，外部表执行时会抛出异常 <code>Cannot truncate non-managed table XXXX</code>。</li></ul> <p>示例：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">TRUNCATE</span> <span class="token keyword">TABLE</span> emp_mgt_ptn <span class="token keyword">PARTITION</span> <span class="token punctuation">(</span>deptno<span class="token operator">=</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="删除表"><a href="#删除表" class="header-anchor">#</a> 删除表</h3> <p>语法：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DROP</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> table_name <span class="token punctuation">[</span><span class="token keyword">PURGE</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>内部表：不仅会删除表的元数据，同时会删除 HDFS 上的数据；</li> <li>外部表：只会删除表的元数据，不会删除 HDFS 上的数据；</li> <li>删除视图引用的表时，不会给出警告（但视图已经无效了，必须由用户删除或重新创建）。</li></ul> <h2 id="五、其他命令"><a href="#五、其他命令" class="header-anchor">#</a> 五、其他命令</h2> <h3 id="describe"><a href="#describe" class="header-anchor">#</a> Describe</h3> <p>查看数据库：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DESCRIBE</span><span class="token operator">|</span><span class="token keyword">Desc</span> <span class="token keyword">DATABASE</span> <span class="token punctuation">[</span><span class="token keyword">EXTENDED</span><span class="token punctuation">]</span> db_name<span class="token punctuation">;</span>  <span class="token comment">--EXTENDED 是否显示额外属性</span>
</code></pre></div><p>查看表：</p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">DESCRIBE</span><span class="token operator">|</span><span class="token keyword">Desc</span> <span class="token punctuation">[</span><span class="token keyword">EXTENDED</span><span class="token operator">|</span>FORMATTED<span class="token punctuation">]</span> table_name <span class="token comment">--FORMATTED 以友好的展现方式查看表详情</span>
</code></pre></div><h3 id="show"><a href="#show" class="header-anchor">#</a> Show</h3> <p><strong>1. 查看数据库列表</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 语法</span>
<span class="token keyword">SHOW</span> <span class="token punctuation">(</span><span class="token keyword">DATABASES</span><span class="token operator">|</span>SCHEMAS<span class="token punctuation">)</span> <span class="token punctuation">[</span><span class="token operator">LIKE</span> <span class="token string">'identifier_with_wildcards'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">-- 示例：</span>
<span class="token keyword">SHOW</span> <span class="token keyword">DATABASES</span> <span class="token operator">like</span> <span class="token string">'hive*'</span><span class="token punctuation">;</span>
</code></pre></div><p>LIKE 子句允许使用正则表达式进行过滤，但是 SHOW 语句当中的 LIKE 子句只支持 <code>*</code>（通配符）和 <code>|</code>（条件或）两个符号。例如 <code>employees</code>，<code>emp *</code>，<code>emp * | * ees</code>，所有这些都将匹配名为 <code>employees</code> 的数据库。</p> <p><strong>2. 查看表的列表</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token comment">-- 语法</span>
<span class="token keyword">SHOW</span> <span class="token keyword">TABLES</span> <span class="token punctuation">[</span><span class="token operator">IN</span> database_name<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token string">'identifier_with_wildcards'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token comment">-- 示例</span>
<span class="token keyword">SHOW</span> <span class="token keyword">TABLES</span> <span class="token operator">IN</span> <span class="token keyword">default</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>3. 查看视图列表</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> VIEWS <span class="token punctuation">[</span><span class="token operator">IN</span><span class="token operator">/</span><span class="token keyword">FROM</span> database_name<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">LIKE</span> <span class="token string">'pattern_with_wildcards'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>   <span class="token comment">--仅支持 Hive 2.2.0</span>
</code></pre></div><p><strong>4. 查看表的分区列表</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> PARTITIONS table_name<span class="token punctuation">;</span>
</code></pre></div><p><strong>5. 查看表/视图的创建语句</strong></p> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">(</span><span class="token punctuation">[</span>db_name<span class="token punctuation">.</span><span class="token punctuation">]</span>table_name<span class="token operator">|</span>view_name<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="参考资料"><a href="#参考资料" class="header-anchor">#</a> 参考资料</h2> <ul><li><a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL" target="_blank" rel="noopener noreferrer">LanguageManual DDL<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/bigdata-tutorial/edit/master/docs/hive/hive-ddl.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/bigdata-tutorial/assets/js/app.9e86c55f.js" defer></script><script src="/bigdata-tutorial/assets/js/4.6e5a58a7.js" defer></script><script src="/bigdata-tutorial/assets/js/22.661a4c0a.js" defer></script><script src="/bigdata-tutorial/assets/js/5.97e60065.js" defer></script>
  </body>
</html>
