<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ZooKeeper Java API | BIGDATA-TUTORIAL</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/bigdata-tutorial/favicon.ico">
    <meta name="description" content="å¤§æ•°æ®æ•™ç¨‹">
    <link rel="preload" href="/bigdata-tutorial/assets/css/0.styles.9b6772c9.css" as="style"><link rel="preload" href="/bigdata-tutorial/assets/js/app.9e86c55f.js" as="script"><link rel="preload" href="/bigdata-tutorial/assets/js/4.6e5a58a7.js" as="script"><link rel="preload" href="/bigdata-tutorial/assets/js/44.50436166.js" as="script"><link rel="preload" href="/bigdata-tutorial/assets/js/5.97e60065.js" as="script"><link rel="prefetch" href="/bigdata-tutorial/assets/js/10.b18536f5.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/11.d45305ad.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/12.f7ba974a.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/13.3fb367cb.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/14.f9ba6e81.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/15.92fa8d15.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/16.03a706f1.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/17.4240ccc4.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/18.47724a3c.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/19.893cd0e1.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/20.0f9c85d2.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/21.acc7f149.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/22.661a4c0a.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/23.81ddc809.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/24.86cf02b7.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/25.1a925ec5.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/26.44a7e88b.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/27.02160541.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/28.f81d3aba.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/29.e3c8d4f1.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/30.dea331c0.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/31.3a150281.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/32.8d690ba0.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/33.1f32bcf1.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/34.45338a6d.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/35.e505a47e.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/36.5751c2c9.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/37.1270bfe7.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/38.3b5d01fa.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/39.f8cf867c.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/40.9f18e62f.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/41.10eace07.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/42.fd96f2b1.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/43.d77fd497.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/45.9f6de474.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/46.65d98cbf.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/47.8c2d3205.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/6.dd9aa758.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/7.ac8df731.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/8.83a9d945.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/9.c01c4b35.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/vendors~flowchart.8982e116.js"><link rel="prefetch" href="/bigdata-tutorial/assets/js/vendors~notification.f509967c.js">
    <link rel="stylesheet" href="/bigdata-tutorial/assets/css/0.styles.9b6772c9.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/bigdata-tutorial/" class="home-link router-link-active"><img src="images/dunwu-logo-100.png" alt="BIGDATA-TUTORIAL" class="logo"> <span class="site-name can-hide">BIGDATA-TUTORIAL</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/bigdata-tutorial/hive/" class="nav-link">
  Hive
</a></div><div class="nav-item"><a href="/bigdata-tutorial/hdfs/" class="nav-link">
  Hdfs
</a></div><div class="nav-item"><a href="/bigdata-tutorial/hbase/" class="nav-link">
  Hbase
</a></div><div class="nav-item"><a href="/bigdata-tutorial/zookeeper/" class="nav-link router-link-active">
  ZooKeeper
</a></div><div class="nav-item"><a href="/bigdata-tutorial/kafka/" class="nav-link">
  Kafka
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/bigdata-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/bigdata-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/bigdata-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/bigdata-tutorial/hive/" class="nav-link">
  Hive
</a></div><div class="nav-item"><a href="/bigdata-tutorial/hdfs/" class="nav-link">
  Hdfs
</a></div><div class="nav-item"><a href="/bigdata-tutorial/hbase/" class="nav-link">
  Hbase
</a></div><div class="nav-item"><a href="/bigdata-tutorial/zookeeper/" class="nav-link router-link-active">
  ZooKeeper
</a></div><div class="nav-item"><a href="/bigdata-tutorial/kafka/" class="nav-link">
  Kafka
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><span class="title">âœ¨ Javaç³»åˆ—</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/java-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Java æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/bigdata-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaCore æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/bigdata-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  JavaTech æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://dunwu.github.io/spring-boot-tutorial/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Spring Boot æ•™ç¨‹ ğŸ“š
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/dunwu/blog" target="_blank" rel="noopener noreferrer" class="nav-link external">
  ğŸ¯ åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/dunwu/bigdata-tutorial" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ZooKeeper Java API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/bigdata-tutorial/zookeeper/zookeeper-api.html#client-api-ç®€ä»‹" class="sidebar-link">Client API ç®€ä»‹</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bigdata-tutorial/zookeeper/zookeeper-api.html#å¼•å…¥ä¾èµ–" class="sidebar-link">å¼•å…¥ä¾èµ–</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bigdata-tutorial/zookeeper/zookeeper-api.html#è¿æ¥-zookeeper" class="sidebar-link">è¿æ¥ ZooKeeper</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bigdata-tutorial/zookeeper/zookeeper-api.html#åˆ›å»º-znode" class="sidebar-link">åˆ›å»º znode</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bigdata-tutorial/zookeeper/zookeeper-api.html#åˆ é™¤-znode" class="sidebar-link">åˆ é™¤ Znode</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bigdata-tutorial/zookeeper/zookeeper-api.html#æ£€æŸ¥-znode-æ˜¯å¦å­˜åœ¨" class="sidebar-link">æ£€æŸ¥ znode æ˜¯å¦å­˜åœ¨</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bigdata-tutorial/zookeeper/zookeeper-api.html#getdata-æ–¹æ³•" class="sidebar-link">getData æ–¹æ³•</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bigdata-tutorial/zookeeper/zookeeper-api.html#setdata-æ–¹æ³•" class="sidebar-link">setData æ–¹æ³•</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bigdata-tutorial/zookeeper/zookeeper-api.html#getchildren-æ–¹æ³•" class="sidebar-link">getChildren æ–¹æ³•</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/bigdata-tutorial/zookeeper/zookeeper-api.html#å‚è€ƒèµ„æ–™" class="sidebar-link">å‚è€ƒèµ„æ–™</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="zookeeper-java-api"><a href="#zookeeper-java-api" class="header-anchor">#</a> ZooKeeper Java API</h1> <blockquote><p><strong>ZooKeeper æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼åº”ç”¨åè°ƒæœåŠ¡</strong> ï¼Œç”± Apache è¿›è¡Œç»´æŠ¤ã€‚</p> <p>ZooKeeper å¯ä»¥ç”¨äºå‘å¸ƒ/è®¢é˜…ã€è´Ÿè½½å‡è¡¡ã€å‘½ä»¤æœåŠ¡ã€åˆ†å¸ƒå¼åè°ƒ/é€šçŸ¥ã€é›†ç¾¤ç®¡ç†ã€Master é€‰ä¸¾ã€åˆ†å¸ƒå¼é”å’Œåˆ†å¸ƒå¼é˜Ÿåˆ—ç­‰åŠŸèƒ½ ã€‚</p> <p>ZooKeeper å®˜æ–¹æ”¯æŒ Java å’Œ C çš„ Client APIã€‚ZooKeeper ç¤¾åŒºä¸ºå¤§å¤šæ•°è¯­è¨€ï¼ˆ.NETï¼Œpython ç­‰ï¼‰æä¾›éå®˜æ–¹ APIã€‚</p></blockquote> <h2 id="client-api-ç®€ä»‹"><a href="#client-api-ç®€ä»‹" class="header-anchor">#</a> Client API ç®€ä»‹</h2> <p>å®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯äº¤äº’éµå¾ªä»¥ä¸‹åŸºæœ¬æ­¥éª¤ï¼š</p> <ol><li>å®¢æˆ·ç«¯è¿æ¥ ZooKeeper æœåŠ¡ç«¯é›†ç¾¤ä»»æ„å·¥ä½œèŠ‚ç‚¹ï¼Œè¯¥èŠ‚ç‚¹ä¸ºå®¢æˆ·ç«¯åˆ†é…ä¼šè¯ IDã€‚</li> <li>ä¸ºäº†ä¿æŒé€šä¿¡ï¼Œå®¢æˆ·ç«¯éœ€è¦å’ŒæœåŠ¡ç«¯ä¿æŒå¿ƒè·³ï¼ˆå®è´¨ä¸Šå°±æ˜¯ ping ï¼‰ã€‚å¦åˆ™ï¼ŒZooKeeper æœåŠ¡ä¼šè¯è¶…æ—¶æ—¶é—´å†…æœªæ”¶åˆ°å®¢æˆ·ç«¯è¯·æ±‚ï¼Œä¼šå°†ä¼šè¯è§†ä¸ºè¿‡æœŸã€‚è¿™ç§æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¦‚æœè¦é€šä¿¡ï¼Œå°±éœ€è¦é‡æ–°è¿æ¥ã€‚</li> <li>åªè¦ä¼šè¯ ID å¤„äºæ´»åŠ¨çŠ¶æ€ï¼Œå°±å¯ä»¥æ‰§è¡Œè¯»å†™ znode æ“ä½œã€‚</li> <li>æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼Œå®¢æˆ·ç«¯æ–­å¼€ä¸ ZooKeeper æœåŠ¡ç«¯é›†ç¾¤çš„è¿æ¥ã€‚å¦‚æœå®¢æˆ·ç«¯é•¿æ—¶é—´ä¸æ´»åŠ¨ï¼Œåˆ™ ZooKeeper é›†åˆå°†è‡ªåŠ¨æ–­å¼€å®¢æˆ·ç«¯ã€‚</li></ol> <p>ZooKeeper Client API çš„æ ¸å¿ƒæ˜¯ <strong><code>ZooKeeper</code> ç±»</strong>ã€‚å®ƒåœ¨å…¶æ„é€ å‡½æ•°ä¸­æä¾›äº†è¿æ¥ ZooKeeper æœåŠ¡çš„é…ç½®é€‰é¡¹ï¼Œå¹¶æä¾›äº†è®¿é—® ZooKeeper æ•°æ®çš„æ–¹æ³•ã€‚</p> <blockquote><p>å…¶ä¸»è¦æ“ä½œå¦‚ä¸‹ï¼š</p> <ul><li><strong><code>connect</code></strong> - è¿æ¥ ZooKeeper æœåŠ¡</li> <li><strong><code>create</code></strong> - åˆ›å»º znode</li> <li><strong><code>exists</code></strong> - æ£€æŸ¥ znode æ˜¯å¦å­˜åœ¨åŠå…¶ä¿¡æ¯</li> <li><strong><code>getACL</code></strong> / <strong><code>setACL</code></strong>- è·å–/è®¾ç½®ä¸€ä¸ª znode çš„ ACL</li> <li><strong><code>getData</code></strong> / <strong><code>setData</code></strong>- è·å–/è®¾ç½®ä¸€ä¸ª znode çš„æ•°æ®</li> <li><strong><code>getChildren</code></strong> - è·å–ç‰¹å®š znode ä¸­çš„æ‰€æœ‰å­èŠ‚ç‚¹</li> <li><strong><code>delete</code></strong> - åˆ é™¤ç‰¹å®šçš„ znode åŠå…¶æ‰€æœ‰å­é¡¹</li> <li><strong><code>close</code></strong> - å…³é—­è¿æ¥</li></ul></blockquote> <h2 id="å¼•å…¥ä¾èµ–"><a href="#å¼•å…¥ä¾èµ–" class="header-anchor">#</a> å¼•å…¥ä¾èµ–</h2> <p>maven é¡¹ç›®ä½¿ç”¨ ZooKeeper Clientï¼Œåªéœ€åœ¨ pom.xml ä¸­æ·»åŠ ï¼š</p> <div class="language-xml extra-class"><pre class="language-xml"><code>  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.apache.curator<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>curator-recipes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
   <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>4.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="è¿æ¥-zookeeper"><a href="#è¿æ¥-zookeeper" class="header-anchor">#</a> è¿æ¥ ZooKeeper</h2> <p>ZooKeeper ç±»é€šè¿‡å…¶æ„é€ å‡½æ•°æä¾›è¿æ¥ ZooKeeper æœåŠ¡çš„åŠŸèƒ½ã€‚å…¶æ„é€ å‡½æ•°çš„å®šä¹‰å¦‚ä¸‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">ZooKeeper</span><span class="token punctuation">(</span><span class="token class-name">String</span> connectionString<span class="token punctuation">,</span> <span class="token keyword">int</span> sessionTimeout<span class="token punctuation">,</span> <span class="token class-name">Watcher</span> watcher<span class="token punctuation">)</span>
</code></pre></div><blockquote><p>å‚æ•°è¯´æ˜ï¼š</p> <ul><li><strong><code>connectionString</code></strong> - ZooKeeper é›†ç¾¤çš„ä¸»æœºåˆ—è¡¨ã€‚</li> <li><strong><code>sessionTimeout</code></strong> - ä¼šè¯è¶…æ—¶æ—¶é—´ï¼ˆä»¥æ¯«ç§’ä¸ºå•ä½ï¼‰ã€‚</li> <li><strong>watcher</strong> - å®ç°ç›‘è§†æœºåˆ¶çš„å›è°ƒã€‚å½“è¢«ç›‘æ§çš„ znode çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒZooKeeper æœåŠ¡ç«¯çš„ <code>WatcherManager</code> ä¼šä¸»åŠ¨è°ƒç”¨ä¼ å…¥çš„ Watcher ï¼Œæ¨é€çŠ¶æ€å˜åŒ–ç»™å®¢æˆ·ç«¯ã€‚</li></ul></blockquote> <p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„å¸®åŠ©ç±» <strong>ZooKeeperConnection</strong> ï¼Œå¹¶æ·»åŠ ä¸€ä¸ªæ–¹æ³• <strong>connect</strong> ã€‚ <strong>connect</strong> æ–¹æ³•åˆ›å»ºä¸€ä¸ª ZooKeeper å¯¹è±¡ï¼Œè¿æ¥åˆ° ZooKeeper é›†åˆï¼Œç„¶åè¿”å›å¯¹è±¡ã€‚</p> <p>è¿™é‡Œ <strong>CountDownLatch</strong> ç”¨äºåœæ­¢ï¼ˆç­‰å¾…ï¼‰ä¸»è¿›ç¨‹ï¼Œç›´åˆ°å®¢æˆ·ç«¯ä¸ ZooKeeper é›†åˆè¿æ¥ã€‚</p> <p>ZooKeeper é›†åˆé€šè¿‡ç›‘è§†å™¨å›è°ƒæ¥å›å¤è¿æ¥çŠ¶æ€ã€‚ä¸€æ—¦å®¢æˆ·ç«¯ä¸ ZooKeeper é›†åˆè¿æ¥ï¼Œç›‘è§†å™¨å›è°ƒå°±ä¼šè¢«è°ƒç”¨ï¼Œå¹¶ä¸”ç›‘è§†å™¨å›è°ƒå‡½æ•°è°ƒç”¨<strong>CountDownLatch</strong>çš„<strong>countDown</strong>æ–¹æ³•æ¥é‡Šæ”¾é”ï¼Œåœ¨ä¸»è¿›ç¨‹ä¸­<strong>await</strong>ã€‚</p> <p>ä»¥ä¸‹æ˜¯ä¸ ZooKeeper é›†åˆè¿æ¥çš„å®Œæ•´ä»£ç ã€‚</p> <p>ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// import java classes</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent</span><span class="token punctuation">.</span><span class="token class-name">CountDownLatch</span><span class="token punctuation">;</span>

<span class="token comment">// import zookeeper classes</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">KeeperException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">WatchedEvent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span><span class="token class-name">KeeperState</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">ZooKeeper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">AsyncCallback</span><span class="token punctuation">.</span><span class="token class-name">StatCallback</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">KeeperException</span><span class="token punctuation">.</span><span class="token class-name">Code</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper<span class="token punctuation">.</span>data</span><span class="token punctuation">.</span><span class="token class-name">Stat</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZooKeeperConnection</span> <span class="token punctuation">{</span>

   <span class="token comment">// declare zookeeper instance to access ZooKeeper ensemble</span>
   <span class="token keyword">private</span> <span class="token class-name">ZooKeeper</span> zoo<span class="token punctuation">;</span>
   <span class="token keyword">final</span> <span class="token class-name">CountDownLatch</span> connectedSignal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// Method to connect zookeeper ensemble.</span>
   <span class="token keyword">public</span> <span class="token class-name">ZooKeeper</span> <span class="token function">connect</span><span class="token punctuation">(</span><span class="token class-name">String</span> host<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span><span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>

      zoo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZooKeeper</span><span class="token punctuation">(</span>host<span class="token punctuation">,</span><span class="token number">5000</span><span class="token punctuation">,</span><span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

         <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">WatchedEvent</span> we<span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span>we<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">KeeperState</span><span class="token punctuation">.</span><span class="token class-name">SyncConnected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
               connectedSignal<span class="token punctuation">.</span><span class="token function">countDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      connectedSignal<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">return</span> zoo<span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token comment">// Method to disconnect from zookeeper server</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
      zoo<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¿å­˜ä¸Šé¢çš„ä»£ç ï¼Œå®ƒå°†åœ¨ä¸‹ä¸€èŠ‚ä¸­ç”¨äºè¿æ¥ ZooKeeper é›†åˆã€‚</p> <h2 id="åˆ›å»º-znode"><a href="#åˆ›å»º-znode" class="header-anchor">#</a> åˆ›å»º znode</h2> <p>ZooKeeper ç±»æä¾›äº†åœ¨ ZooKeeper é›†åˆä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ znode çš„ <strong><code>create</code></strong> æ–¹æ³•ã€‚ <strong>create</strong> æ–¹æ³•çš„ç­¾åå¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>create(String path, byte[] data, List&lt;ACL&gt; acl, CreateMode createMode)
</code></pre></div><ul><li><strong>path</strong> - Znode è·¯å¾„ã€‚ä¾‹å¦‚ï¼Œ/myapp1ï¼Œ/myapp2ï¼Œ/myapp1/mydata1ï¼Œmyapp2/mydata1/myanothersubdata</li> <li><strong>data</strong> - è¦å­˜å‚¨åœ¨æŒ‡å®š znode è·¯å¾„ä¸­çš„æ•°æ®</li> <li><strong>acl</strong> - è¦åˆ›å»ºçš„èŠ‚ç‚¹çš„è®¿é—®æ§åˆ¶åˆ—è¡¨ã€‚ZooKeeper API æä¾›äº†ä¸€ä¸ªé™æ€æ¥å£ <strong>ZooDefs.Ids</strong> æ¥è·å–ä¸€äº›åŸºæœ¬çš„ acl åˆ—è¡¨ã€‚ä¾‹å¦‚ï¼ŒZooDefs.Ids.OPEN_ACL_UNSAFE è¿”å›æ‰“å¼€ znode çš„ acl åˆ—è¡¨ã€‚</li> <li><strong>createMode</strong> - èŠ‚ç‚¹çš„ç±»å‹ï¼Œå³ä¸´æ—¶ï¼Œé¡ºåºæˆ–ä¸¤è€…ã€‚è¿™æ˜¯ä¸€ä¸ª<strong>æšä¸¾</strong>ã€‚</li></ul> <p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Java åº”ç”¨ç¨‹åºæ¥æ£€æŸ¥ ZooKeeper API çš„ <strong>create</strong> åŠŸèƒ½ã€‚åˆ›å»ºæ–‡ä»¶ <strong>ZKCreate.java</strong> ã€‚åœ¨ main æ–¹æ³•ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªç±»å‹ä¸º <strong>ZooKeeperConnection</strong> çš„å¯¹è±¡ï¼Œå¹¶è°ƒç”¨ <strong>connect</strong> æ–¹æ³•è¿æ¥åˆ° ZooKeeper é›†åˆã€‚</p> <p>connect æ–¹æ³•å°†è¿”å› ZooKeeper å¯¹è±¡ <strong>zk</strong> ã€‚ç°åœ¨ï¼Œè¯·ä½¿ç”¨è‡ªå®šä¹‰<strong>path</strong>å’Œ<strong>data</strong>è°ƒç”¨ <strong>zk</strong> å¯¹è±¡çš„ <strong>create</strong> æ–¹æ³•ã€‚</p> <p>åˆ›å»º znode çš„å®Œæ•´ç¨‹åºä»£ç å¦‚ä¸‹ï¼š</p> <p>ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">WatchedEvent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span><span class="token class-name">KeeperState</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">ZooKeeper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">KeeperException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">CreateMode</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">ZooDefs</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZKCreate</span> <span class="token punctuation">{</span>
   <span class="token comment">// create static instance for zookeeper class.</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeper</span> zk<span class="token punctuation">;</span>

   <span class="token comment">// create static instance for ZooKeeperConnection class.</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeperConnection</span> conn<span class="token punctuation">;</span>

   <span class="token comment">// Method to create znode in zookeeper ensemble</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">)</span> <span class="token keyword">throws</span>
      <span class="token class-name">KeeperException</span><span class="token punctuation">,</span><span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
      zk<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token class-name">ZooDefs</span><span class="token punctuation">.</span><span class="token class-name">Ids</span><span class="token punctuation">.</span>OPEN_ACL_UNSAFE<span class="token punctuation">,</span>
      <span class="token class-name">CreateMode</span><span class="token punctuation">.</span>PERSISTENT<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>

      <span class="token comment">// znode path</span>
      <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/MyFirstZnode&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Assign path to znode</span>

      <span class="token comment">// data in byte array</span>
      <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token string">&quot;My first zookeeper app&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Declare data</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
         conn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZooKeeperConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         zk <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token function">create</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Create the data to the specified path</span>
         conn<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Catch error message</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸€æ—¦ç¼–è¯‘å’Œæ‰§è¡Œåº”ç”¨ç¨‹åºï¼Œå°†åœ¨ ZooKeeper é›†åˆä¸­åˆ›å»ºå…·æœ‰æŒ‡å®šæ•°æ®çš„ znodeã€‚ä½ å¯ä»¥ä½¿ç”¨ ZooKeeper CLI <strong>zkCli.sh</strong> è¿›è¡Œæ£€æŸ¥ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>cd /path/to/zookeeper
bin/zkCli.sh
&gt;&gt;&gt; get /MyFirstZnode
</code></pre></div><h2 id="åˆ é™¤-znode"><a href="#åˆ é™¤-znode" class="header-anchor">#</a> åˆ é™¤ Znode</h2> <p>ZooKeeper ç±»æä¾›äº† <strong>delete</strong> æ–¹æ³•æ¥åˆ é™¤æŒ‡å®šçš„ znodeã€‚ <strong>delete</strong> æ–¹æ³•çš„ç­¾åå¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>delete(String path, int version)
</code></pre></div><ul><li><strong>path</strong> - Znode è·¯å¾„ã€‚</li> <li><strong>version</strong> - znode çš„å½“å‰ç‰ˆæœ¬ã€‚</li></ul> <p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Java åº”ç”¨ç¨‹åºæ¥äº†è§£ ZooKeeper API çš„ <strong>delete</strong> åŠŸèƒ½ã€‚åˆ›å»ºæ–‡ä»¶ <strong>ZKDelete.java</strong> ã€‚åœ¨ main æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ <strong>ZooKeeperConnection</strong> å¯¹è±¡åˆ›å»ºä¸€ä¸ª ZooKeeper å¯¹è±¡ <strong>zk</strong> ã€‚ç„¶åï¼Œä½¿ç”¨æŒ‡å®šçš„è·¯å¾„å’Œç‰ˆæœ¬å·è°ƒç”¨ <strong>zk</strong> å¯¹è±¡çš„ <strong>delete</strong> æ–¹æ³•ã€‚</p> <p>åˆ é™¤ znode çš„å®Œæ•´ç¨‹åºä»£ç å¦‚ä¸‹ï¼š</p> <p>ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">ZooKeeper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">KeeperException</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZKDelete</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeper</span> zk<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeperConnection</span> conn<span class="token punctuation">;</span>

   <span class="token comment">// Method to check existence of znode and its status, if znode is available.</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">KeeperException</span><span class="token punctuation">,</span><span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
      zk<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>zk<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span><span class="token class-name">KeeperException</span> <span class="token punctuation">{</span>
      <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/MyFirstZnode&quot;</span><span class="token punctuation">;</span> <span class="token comment">//Assign path to the znode</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
         conn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZooKeeperConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         zk <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token function">delete</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//delete the node with the specified path</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// catches error messages</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="æ£€æŸ¥-znode-æ˜¯å¦å­˜åœ¨"><a href="#æ£€æŸ¥-znode-æ˜¯å¦å­˜åœ¨" class="header-anchor">#</a> æ£€æŸ¥ znode æ˜¯å¦å­˜åœ¨</h2> <p>ZooKeeper ç±»æä¾›äº† <strong>exists</strong> æ–¹æ³•æ¥æ£€æŸ¥ znode çš„å­˜åœ¨ã€‚å¦‚æœæŒ‡å®šçš„ znode å­˜åœ¨ï¼Œåˆ™è¿”å›ä¸€ä¸ª znode çš„å…ƒæ•°æ®ã€‚<strong>exists</strong>æ–¹æ³•çš„ç­¾åå¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>exists(String path, boolean watcher)
</code></pre></div><ul><li><strong>path</strong>- Znode è·¯å¾„</li> <li><strong>watcher</strong> - å¸ƒå°”å€¼ï¼Œç”¨äºæŒ‡å®šæ˜¯å¦ç›‘è§†æŒ‡å®šçš„ znode</li></ul> <p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Java åº”ç”¨ç¨‹åºæ¥æ£€æŸ¥ ZooKeeper API çš„â€œexistsâ€åŠŸèƒ½ã€‚åˆ›å»ºæ–‡ä»¶â€œZKExists.javaâ€ã€‚åœ¨ main æ–¹æ³•ä¸­ï¼Œä½¿ç”¨â€œZooKeeperConnectionâ€å¯¹è±¡åˆ›å»º ZooKeeper å¯¹è±¡â€œzkâ€ã€‚ç„¶åï¼Œä½¿ç”¨è‡ªå®šä¹‰â€œpathâ€è°ƒç”¨â€œzkâ€å¯¹è±¡çš„â€œexistsâ€æ–¹æ³•ã€‚å®Œæ•´çš„åˆ—è¡¨å¦‚ä¸‹ï¼š</p> <p>ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">ZooKeeper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">KeeperException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">WatchedEvent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span><span class="token class-name">KeeperState</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper<span class="token punctuation">.</span>data</span><span class="token punctuation">.</span><span class="token class-name">Stat</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZKExists</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeper</span> zk<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeperConnection</span> conn<span class="token punctuation">;</span>

   <span class="token comment">// Method to check existence of znode and its status, if znode is available.</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Stat</span> <span class="token function">znode_exists</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token keyword">throws</span>
      <span class="token class-name">KeeperException</span><span class="token punctuation">,</span><span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> zk<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span><span class="token class-name">KeeperException</span> <span class="token punctuation">{</span>
      <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/MyFirstZnode&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Assign znode to the specified path</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
         conn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZooKeeperConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         zk <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Stat</span> stat <span class="token operator">=</span> <span class="token function">znode_exists</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Stat checks the path of the znode</span>

         <span class="token keyword">if</span><span class="token punctuation">(</span>stat <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Node exists and the node version is &quot;</span> <span class="token operator">+</span>
            stat<span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Node does not exists&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>

      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Catches error messages</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸€æ—¦ç¼–è¯‘å’Œæ‰§è¡Œåº”ç”¨ç¨‹åºï¼Œä½ å°†è·å¾—ä»¥ä¸‹è¾“å‡ºã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>Node exists and the node version is 1.
</code></pre></div><h2 id="getdata-æ–¹æ³•"><a href="#getdata-æ–¹æ³•" class="header-anchor">#</a> getData æ–¹æ³•</h2> <p>ZooKeeper ç±»æä¾› <strong>getData</strong> æ–¹æ³•æ¥è·å–é™„åŠ åœ¨æŒ‡å®š znode ä¸­çš„æ•°æ®åŠå…¶çŠ¶æ€ã€‚ <strong>getData</strong> æ–¹æ³•çš„ç­¾åå¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>getData(String path, Watcher watcher, Stat stat)
</code></pre></div><ul><li><strong>path</strong> - Znode è·¯å¾„ã€‚</li> <li><strong>watcher</strong> - ç›‘è§†å™¨ç±»å‹çš„å›è°ƒå‡½æ•°ã€‚å½“æŒ‡å®šçš„ znode çš„æ•°æ®æ”¹å˜æ—¶ï¼ŒZooKeeper é›†åˆå°†é€šè¿‡ç›‘è§†å™¨å›è°ƒè¿›è¡Œé€šçŸ¥ã€‚è¿™æ˜¯ä¸€æ¬¡æ€§é€šçŸ¥ã€‚</li> <li><strong>stat</strong> - è¿”å› znode çš„å…ƒæ•°æ®ã€‚</li></ul> <p>è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Java åº”ç”¨ç¨‹åºæ¥äº†è§£ ZooKeeper API çš„ <strong>getData</strong> åŠŸèƒ½ã€‚åˆ›å»ºæ–‡ä»¶ <strong>ZKGetData.java</strong> ã€‚åœ¨ main æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ <strong>ZooKeeperConnection</strong> å¯¹è±¡åˆ›å»ºä¸€ä¸ª ZooKeeper å¯¹è±¡ <strong>zk</strong> ã€‚ç„¶åï¼Œä½¿ç”¨è‡ªå®šä¹‰è·¯å¾„è°ƒç”¨ zk å¯¹è±¡çš„ <strong>getData</strong> æ–¹æ³•ã€‚</p> <p>ä¸‹é¢æ˜¯ä»æŒ‡å®šèŠ‚ç‚¹è·å–æ•°æ®çš„å®Œæ•´ç¨‹åºä»£ç ï¼š</p> <p>ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent</span><span class="token punctuation">.</span><span class="token class-name">CountDownLatch</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">ZooKeeper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">KeeperException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">WatchedEvent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span><span class="token class-name">KeeperState</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper<span class="token punctuation">.</span>data</span><span class="token punctuation">.</span><span class="token class-name">Stat</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZKGetData</span> <span class="token punctuation">{</span>

   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeper</span> zk<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeperConnection</span> conn<span class="token punctuation">;</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Stat</span> <span class="token function">znode_exists</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token keyword">throws</span>
      <span class="token class-name">KeeperException</span><span class="token punctuation">,</span><span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> zk<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span> <span class="token class-name">KeeperException</span> <span class="token punctuation">{</span>
      <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/MyFirstZnode&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">final</span> <span class="token class-name">CountDownLatch</span> connectedSignal <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CountDownLatch</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
         conn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZooKeeperConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         zk <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Stat</span> stat <span class="token operator">=</span> <span class="token function">znode_exists</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token keyword">if</span><span class="token punctuation">(</span>stat <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> b <span class="token operator">=</span> zk<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Watcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

               <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">process</span><span class="token punctuation">(</span><span class="token class-name">WatchedEvent</span> we<span class="token punctuation">)</span> <span class="token punctuation">{</span>

                  <span class="token keyword">if</span> <span class="token punctuation">(</span>we<span class="token punctuation">.</span><span class="token function">getType</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token class-name">Event</span><span class="token punctuation">.</span><span class="token class-name">EventType</span><span class="token punctuation">.</span><span class="token class-name">None</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                     <span class="token keyword">switch</span><span class="token punctuation">(</span>we<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token keyword">case</span> <span class="token class-name">Expired</span><span class="token operator">:</span>
                        connectedSignal<span class="token punctuation">.</span><span class="token function">countDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token keyword">break</span><span class="token punctuation">;</span>
                     <span class="token punctuation">}</span>

                  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                     <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/MyFirstZnode&quot;</span><span class="token punctuation">;</span>

                     <span class="token keyword">try</span> <span class="token punctuation">{</span>
                        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bn <span class="token operator">=</span> zk<span class="token punctuation">.</span><span class="token function">getData</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>
                        <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bn<span class="token punctuation">,</span>
                        <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
                        connectedSignal<span class="token punctuation">.</span><span class="token function">countDown</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                     <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> ex<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ex<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                     <span class="token punctuation">}</span>
                  <span class="token punctuation">}</span>
               <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token class-name">String</span> data <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>b<span class="token punctuation">,</span> <span class="token string">&quot;UTF-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
            connectedSignal<span class="token punctuation">.</span><span class="token function">await</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Node does not exists&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ä¸€æ—¦ç¼–è¯‘å’Œæ‰§è¡Œåº”ç”¨ç¨‹åºï¼Œä½ å°†è·å¾—ä»¥ä¸‹è¾“å‡º</p> <div class="language- extra-class"><pre class="language-text"><code>My first zookeeper app
</code></pre></div><p>åº”ç”¨ç¨‹åºå°†ç­‰å¾… ZooKeeper é›†åˆçš„è¿›ä¸€æ­¥é€šçŸ¥ã€‚ä½¿ç”¨ ZooKeeper CLI <strong>zkCli.sh</strong> æ›´æ”¹æŒ‡å®š znode çš„æ•°æ®ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>cd /path/to/zookeeper
bin/zkCli.sh
&gt;&gt;&gt; set /MyFirstZnode Hello
</code></pre></div><p>ç°åœ¨ï¼Œåº”ç”¨ç¨‹åºå°†æ‰“å°ä»¥ä¸‹è¾“å‡ºå¹¶é€€å‡ºã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>Hello
</code></pre></div><h2 id="setdata-æ–¹æ³•"><a href="#setdata-æ–¹æ³•" class="header-anchor">#</a> setData æ–¹æ³•</h2> <p>ZooKeeper ç±»æä¾› <strong>setData</strong> æ–¹æ³•æ¥ä¿®æ”¹æŒ‡å®š znode ä¸­é™„åŠ çš„æ•°æ®ã€‚ <strong>setData</strong> æ–¹æ³•çš„ç­¾åå¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>setData(String path, byte[] data, int version)
</code></pre></div><ul><li><strong>path</strong>- Znode è·¯å¾„</li> <li><strong>data</strong> - è¦å­˜å‚¨åœ¨æŒ‡å®š znode è·¯å¾„ä¸­çš„æ•°æ®ã€‚</li> <li><strong>version</strong>- znode çš„å½“å‰ç‰ˆæœ¬ã€‚æ¯å½“æ•°æ®æ›´æ”¹æ—¶ï¼ŒZooKeeper ä¼šæ›´æ–° znode çš„ç‰ˆæœ¬å·ã€‚</li></ul> <p>ç°åœ¨è®©æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ Java åº”ç”¨ç¨‹åºæ¥äº†è§£ ZooKeeper API çš„ <strong>setData</strong> åŠŸèƒ½ã€‚åˆ›å»ºæ–‡ä»¶ <strong>ZKSetData.java</strong> ã€‚åœ¨ main æ–¹æ³•ä¸­ï¼Œä½¿ç”¨ <strong>ZooKeeperConnection</strong> å¯¹è±¡åˆ›å»ºä¸€ä¸ª ZooKeeper å¯¹è±¡ <strong>zk</strong> ã€‚ç„¶åï¼Œä½¿ç”¨æŒ‡å®šçš„è·¯å¾„ï¼Œæ–°æ•°æ®å’ŒèŠ‚ç‚¹ç‰ˆæœ¬è°ƒç”¨ <strong>zk</strong> å¯¹è±¡çš„ <strong>setData</strong> æ–¹æ³•ã€‚</p> <p>ä»¥ä¸‹æ˜¯ä¿®æ”¹é™„åŠ åœ¨æŒ‡å®š znode ä¸­çš„æ•°æ®çš„å®Œæ•´ç¨‹åºä»£ç ã€‚</p> <p>ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">ZooKeeper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">KeeperException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">WatchedEvent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span><span class="token class-name">KeeperState</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZKSetData</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeper</span> zk<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeperConnection</span> conn<span class="token punctuation">;</span>

   <span class="token comment">// Method to update the data in a znode. Similar to getData but without watcher.</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">,</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data<span class="token punctuation">)</span> <span class="token keyword">throws</span>
      <span class="token class-name">KeeperException</span><span class="token punctuation">,</span><span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
      zk<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">,</span> zk<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getVersion</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span><span class="token class-name">KeeperException</span> <span class="token punctuation">{</span>
      <span class="token class-name">String</span> path<span class="token operator">=</span> <span class="token string">&quot;/MyFirstZnode&quot;</span><span class="token punctuation">;</span>
      <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> data <span class="token operator">=</span> <span class="token string">&quot;Success&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Assign data which is to be updated.</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
         conn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZooKeeperConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         zk <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token function">update</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Update znode data to the specified path</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>ç¼–è¯‘å¹¶æ‰§è¡Œåº”ç”¨ç¨‹åºåï¼ŒæŒ‡å®šçš„ znode çš„æ•°æ®å°†è¢«æ”¹å˜ï¼Œå¹¶ä¸”å¯ä»¥ä½¿ç”¨ ZooKeeper CLI <strong>zkCli.sh</strong> è¿›è¡Œæ£€æŸ¥ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>cd /path/to/zookeeper
bin/zkCli.sh
&gt;&gt;&gt; get /MyFirstZnode
</code></pre></div><h2 id="getchildren-æ–¹æ³•"><a href="#getchildren-æ–¹æ³•" class="header-anchor">#</a> getChildren æ–¹æ³•</h2> <p>ZooKeeper ç±»æä¾› <strong>getChildren</strong> æ–¹æ³•æ¥è·å–ç‰¹å®š znode çš„æ‰€æœ‰å­èŠ‚ç‚¹ã€‚ <strong>getChildren</strong> æ–¹æ³•çš„ç­¾åå¦‚ä¸‹ï¼š</p> <div class="language- extra-class"><pre class="language-text"><code>getChildren(String path, Watcher watcher)
</code></pre></div><ul><li><strong>path</strong> - Znode è·¯å¾„ã€‚</li> <li><strong>watcher</strong> - ç›‘è§†å™¨ç±»å‹çš„å›è°ƒå‡½æ•°ã€‚å½“æŒ‡å®šçš„ znode è¢«åˆ é™¤æˆ– znode ä¸‹çš„å­èŠ‚ç‚¹è¢«åˆ›å»º/åˆ é™¤æ—¶ï¼ŒZooKeeper é›†åˆå°†è¿›è¡Œé€šçŸ¥ã€‚è¿™æ˜¯ä¸€æ¬¡æ€§é€šçŸ¥ã€‚</li></ul> <p>ç¤ºä¾‹ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>io</span><span class="token punctuation">.</span><span class="token class-name">IOException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util</span><span class="token punctuation">.</span>*<span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">ZooKeeper</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">KeeperException</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">WatchedEvent</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper</span><span class="token punctuation">.</span><span class="token class-name">Watcher</span><span class="token punctuation">.</span><span class="token class-name">Event</span><span class="token punctuation">.</span><span class="token class-name">KeeperState</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">org<span class="token punctuation">.</span>apache<span class="token punctuation">.</span>zookeeper<span class="token punctuation">.</span>data</span><span class="token punctuation">.</span><span class="token class-name">Stat</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">ZKGetChildren</span> <span class="token punctuation">{</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeper</span> zk<span class="token punctuation">;</span>
   <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ZooKeeperConnection</span> conn<span class="token punctuation">;</span>

   <span class="token comment">// Method to check existence of znode and its status, if znode is available.</span>
   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">Stat</span> <span class="token function">znode_exists</span><span class="token punctuation">(</span><span class="token class-name">String</span> path<span class="token punctuation">)</span> <span class="token keyword">throws</span>
      <span class="token class-name">KeeperException</span><span class="token punctuation">,</span><span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> zk<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span><span class="token punctuation">,</span><span class="token class-name">KeeperException</span> <span class="token punctuation">{</span>
      <span class="token class-name">String</span> path <span class="token operator">=</span> <span class="token string">&quot;/MyFirstZnode&quot;</span><span class="token punctuation">;</span> <span class="token comment">// Assign path to the znode</span>

      <span class="token keyword">try</span> <span class="token punctuation">{</span>
         conn <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ZooKeeperConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         zk <span class="token operator">=</span> conn<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">&quot;localhost&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Stat</span> stat <span class="token operator">=</span> <span class="token function">znode_exists</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Stat checks the path</span>

         <span class="token keyword">if</span><span class="token punctuation">(</span>stat<span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

            <span class="token comment">// getChildren method - get all the children of znode.It has two args, path and watch</span>
            <span class="token class-name">List</span> <span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> children <span class="token operator">=</span> zk<span class="token punctuation">.</span><span class="token function">getChildren</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> children<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>children<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//Print children's</span>
         <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;Node does not exists&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>

      <span class="token punctuation">}</span> <span class="token keyword">catch</span><span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">getMessage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>

   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>åœ¨è¿è¡Œç¨‹åºä¹‹å‰ï¼Œè®©æˆ‘ä»¬ä½¿ç”¨ ZooKeeper CLI <strong>zkCli.sh</strong> ä¸º <strong>/MyFirstZnode</strong> åˆ›å»ºä¸¤ä¸ªå­èŠ‚ç‚¹ã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>cd /path/to/zookeeper
bin/zkCli.sh
&gt;&gt;&gt; create /MyFirstZnode/myfirstsubnode Hi
&gt;&gt;&gt; create /MyFirstZnode/mysecondsubmode Hi
</code></pre></div><p>ç°åœ¨ï¼Œç¼–è¯‘å’Œè¿è¡Œç¨‹åºå°†è¾“å‡ºä¸Šé¢åˆ›å»ºçš„ znodeã€‚</p> <div class="language- extra-class"><pre class="language-text"><code>myfirstsubnode
mysecondsubnode
</code></pre></div><h2 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="header-anchor">#</a> å‚è€ƒèµ„æ–™</h2> <ul><li><strong>å®˜æ–¹</strong> <ul><li><a href="http://zookeeper.apache.org/" target="_blank" rel="noopener noreferrer">ZooKeeper å®˜ç½‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://cwiki.apache.org/confluence/display/ZOOKEEPER" target="_blank" rel="noopener noreferrer">ZooKeeper å®˜æ–¹æ–‡æ¡£<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/apache/zookeeper" target="_blank" rel="noopener noreferrer">ZooKeeper Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><strong>ä¹¦ç±</strong> <ul><li><a href="https://item.jd.com/12109713.html" target="_blank" rel="noopener noreferrer">ã€ŠHadoop æƒå¨æŒ‡å—ï¼ˆç¬¬å››ç‰ˆï¼‰ã€‹<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li> <li><strong>æ–‡ç« </strong> <ul><li><a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-zookeeper/index.html" target="_blank" rel="noopener noreferrer">åˆ†å¸ƒå¼æœåŠ¡æ¡†æ¶ ZooKeeper -- ç®¡ç†åˆ†å¸ƒå¼ç¯å¢ƒä¸­çš„æ•°æ®<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.cnblogs.com/felixzh/p/5869212.html" target="_blank" rel="noopener noreferrer">ZooKeeper çš„åŠŸèƒ½ä»¥åŠå·¥ä½œåŸç†<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://github.com/heibaiying/BigData-Notes/blob/master/notes/ZooKeeper%E7%AE%80%E4%BB%8B%E5%8F%8A%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5.md" target="_blank" rel="noopener noreferrer">ZooKeeper ç®€ä»‹åŠæ ¸å¿ƒæ¦‚å¿µ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://draveness.me/zookeeper-chubby" target="_blank" rel="noopener noreferrer">è¯¦è§£åˆ†å¸ƒå¼åè°ƒæœåŠ¡ ZooKeeper<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="http://www.jasongj.com/zookeeper/fastleaderelection/" target="_blank" rel="noopener noreferrer">æ·±å…¥æµ…å‡º Zookeeperï¼ˆä¸€ï¼‰ Zookeeper æ¶æ„åŠ FastLeaderElection æœºåˆ¶<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/dunwu/bigdata-tutorial/edit/master/docs/zookeeper/zookeeper-api.md" target="_blank" rel="noopener noreferrer">å¸®åŠ©æˆ‘ä»¬æ”¹å–„æ­¤é¡µé¢ï¼</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/bigdata-tutorial/assets/js/app.9e86c55f.js" defer></script><script src="/bigdata-tutorial/assets/js/4.6e5a58a7.js" defer></script><script src="/bigdata-tutorial/assets/js/44.50436166.js" defer></script><script src="/bigdata-tutorial/assets/js/5.97e60065.js" defer></script>
  </body>
</html>
