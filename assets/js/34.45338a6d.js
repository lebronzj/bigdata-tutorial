(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{487:function(t,a,s){"use strict";s.r(a);var n=s(14),r=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"kafka-åº”ç”¨æŒ‡å—"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka-åº”ç”¨æŒ‡å—"}},[t._v("#")]),t._v(" Kafka åº”ç”¨æŒ‡å—")]),t._v(" "),s("blockquote",[s("p",[t._v("Kafka æ˜¯ Apache çš„å¼€æºé¡¹ç›®ã€‚"),s("strong",[t._v("Kafka æ—¢å¯ä»¥ä½œä¸ºä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶ï¼Œä¹Ÿå¯ä»¥ä½œä¸ºä¸€ä¸ªåˆ†å¸ƒå¼æµå¤„ç†å¹³å°")]),t._v("ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("Kafka ç”¨äºæ„å»ºå®æ—¶æ•°æ®ç®¡é“å’Œæµåº”ç”¨ã€‚å®ƒå…·æœ‰æ°´å¹³å¯ä¼¸ç¼©æ€§ï¼Œå®¹é”™æ€§ï¼Œå¿«é€Ÿå¿«é€Ÿæ€§")]),t._v("ã€‚")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E4%B8%80kafka-%E7%AE%80%E4%BB%8B"}},[t._v("ä¸€ã€Kafka ç®€ä»‹")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#kafka-%E7%9A%84%E7%89%B9%E6%80%A7"}},[t._v("Kafka çš„ç‰¹æ€§")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#kafka-%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"}},[t._v("Kafka æ ¸å¿ƒåŠŸèƒ½")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#kafka-%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"}},[t._v("Kafka é€‚ç”¨åœºæ™¯")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#kafka-%E6%9C%AF%E8%AF%AD"}},[t._v("Kafka æœ¯è¯­")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E5%BF%AB%E9%80%9F%E5%85%A5%E9%97%A8"}},[t._v("å¿«é€Ÿå…¥é—¨")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E5%BC%95%E5%85%A5%E4%BE%9D%E8%B5%96"}},[t._v("å¼•å…¥ä¾èµ–")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#kafka-%E6%A0%B8%E5%BF%83-api"}},[t._v("Kafka æ ¸å¿ƒ API")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E5%8F%91%E9%80%81%E6%B6%88%E6%81%AF"}},[t._v("å‘é€æ¶ˆæ¯")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E6%B6%88%E8%B4%B9%E6%B6%88%E6%81%AF%E6%B5%81%E7%A8%8B"}},[t._v("æ¶ˆè´¹æ¶ˆæ¯æµç¨‹")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#kafka-%E5%88%86%E5%8C%BA"}},[t._v("Kafka åˆ†åŒº")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%8C%BA"}},[t._v("ä»€ä¹ˆæ˜¯åˆ†åŒº")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E5%88%86%E5%8C%BA"}},[t._v("ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†åŒº")])])])]),t._v(" "),s("li",[s("a",{attrs:{href:"#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99"}},[t._v("å‚è€ƒèµ„æ–™")])]),t._v(" "),s("li",[s("a",{attrs:{href:"#%F0%9F%9A%AA-%E4%BC%A0%E9%80%81"}},[t._v("ğŸšª ä¼ é€")])])]),t._v(" "),s("h2",{attrs:{id:"kafka-ç®€ä»‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka-ç®€ä»‹"}},[t._v("#")]),t._v(" Kafka ç®€ä»‹")]),t._v(" "),s("p",[t._v("Kafka æ˜¯ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­é—´ä»¶ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼æµå¤„ç†å¹³å°ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/snap/20200726185629.png",alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"kafka-çš„ç‰¹æ€§"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka-çš„ç‰¹æ€§"}},[t._v("#")]),t._v(" Kafka çš„ç‰¹æ€§")]),t._v(" "),s("p",[t._v("Kafka å…·æœ‰å¦‚ä¸‹ç‰¹æ€§ï¼š")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("ä¼¸ç¼©æ€§")]),t._v(" - éšç€æ•°æ®é‡å¢é•¿ï¼Œå¯ä»¥é€šè¿‡å¯¹ Broker é›†ç¾¤æ°´å¹³æ‰©å±•æ¥æé«˜ç³»ç»Ÿæ€§èƒ½ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("é«˜æ€§èƒ½")]),t._v(" - é€šè¿‡æ¨ªå‘æ‰©å±•ç”Ÿäº§è€…ã€æ¶ˆè´¹è€…(é€šè¿‡æ¶ˆè´¹è€…ç¾¤ç»„å®ç°)å’Œ Brokerï¼ˆé€šè¿‡æ‰©å±•å®ç°ç³»ç»Ÿä¼¸ç¼©æ€§ï¼‰å¯ä»¥è½»æ¾å¤„ç†å·¨å¤§çš„æ¶ˆæ¯æµã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ¶ˆæ¯æŒä¹…åŒ–")]),t._v(" - Kafka å°†æ‰€æœ‰çš„æ¶ˆæ¯å­˜å‚¨åˆ°ç£ç›˜ï¼Œå¹¶åœ¨ç»“æ„ä¸­å¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œä»¥ä¾¿åˆ©ç”¨é¡ºåºç£ç›˜è¯»å–ï¼Œæ‰€ä»¥æ¶ˆæ¯ä¸ä¼šä¸¢å¤±ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"kafka-æ ¸å¿ƒåŠŸèƒ½"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka-æ ¸å¿ƒåŠŸèƒ½"}},[t._v("#")]),t._v(" Kafka æ ¸å¿ƒåŠŸèƒ½")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å‘å¸ƒ / è®¢é˜…")]),t._v(" - å‘å¸ƒ / è®¢é˜…ç±»ä¼¼äºä¸€ä¸ªæ¶ˆæ¯ç³»ç»Ÿï¼Œè¯»å†™æµå¼çš„æ•°æ®")]),t._v(" "),s("li",[s("strong",[t._v("æµå¤„ç†")]),t._v(" - ç¼–å†™å¯æ‰©å±•çš„æµå¤„ç†åº”ç”¨ï¼Œç”¨äºå®æ—¶äº‹ä»¶å“åº”")]),t._v(" "),s("li",[s("strong",[t._v("å­˜å‚¨")]),t._v(" - å°†æµå¼æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªåˆ†å¸ƒå¼ã€æœ‰å‰¯æœ¬çš„é›†ç¾¤ä¸­")])]),t._v(" "),s("h3",{attrs:{id:"kafka-é€‚ç”¨åœºæ™¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka-é€‚ç”¨åœºæ™¯"}},[t._v("#")]),t._v(" Kafka é€‚ç”¨åœºæ™¯")]),t._v(" "),s("p",[t._v("Kafka é€‚ç”¨äºä¸¤ç§åœºæ™¯:")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("æ„é€ å®æ—¶æµæ•°æ®ç®¡é“")]),t._v("ï¼Œå®ƒå¯ä»¥åœ¨åº”ç”¨é—´å¯é åœ°ä¼ è¾“æ•°æ®ï¼ˆç›¸å½“äºæ¶ˆæ¯é˜Ÿåˆ—ï¼‰ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("æ„å»ºå®æ—¶æµå¼åº”ç”¨ç¨‹åº")]),t._v("ï¼Œå¯¹è¿™äº›æµæ•°æ®è¿›è¡Œè½¬æ¢ï¼ˆå³æµå¤„ç†ï¼Œé€šè¿‡ kafka stream åœ¨ä¸»é¢˜å†…éƒ¨è¿›è¡Œè½¬æ¢ï¼‰ã€‚")])]),t._v(" "),s("p",[t._v("Kafka å…è®¸æ‚¨å°†å¤§é‡æ¶ˆæ¯é€šè¿‡é›†ä¸­ä»‹è´¨å­˜å‚¨å¹¶å­˜å‚¨ï¼Œè€Œä¸ç”¨æ‹…å¿ƒæ€§èƒ½æˆ–æ•°æ®ä¸¢å¤±ç­‰é—®é¢˜ã€‚è¿™æ„å‘³ç€å®ƒéå¸¸é€‚åˆç”¨ä½œç³»ç»Ÿæ¶æ„çš„æ ¸å¿ƒï¼Œå……å½“è¿æ¥ä¸åŒåº”ç”¨ç¨‹åºçš„é›†ä¸­ä»‹è´¨ã€‚Kafka å¯ä»¥æˆä¸ºäº‹ä»¶é©±åŠ¨æ¶æ„çš„æ ¸å¿ƒéƒ¨åˆ†ï¼Œå¹¶çœŸæ­£å°†åº”ç”¨ç¨‹åºå½¼æ­¤åˆ†ç¦»ã€‚")]),t._v(" "),s("p",[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/cs/java/javaweb/distributed/mq/kafka/kafka-event-system.png",alt:"img"}})]),t._v(" "),s("h3",{attrs:{id:"kafka-æœ¯è¯­"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka-æœ¯è¯­"}},[t._v("#")]),t._v(" Kafka æœ¯è¯­")]),t._v(" "),s("ul",[s("li",[t._v("æ¶ˆæ¯ï¼šRecordã€‚Kafka æ˜¯æ¶ˆæ¯å¼•æ“å˜›ï¼Œè¿™é‡Œçš„æ¶ˆæ¯å°±æ˜¯æŒ‡ Kafka å¤„ç†çš„ä¸»è¦å¯¹è±¡ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Broker")]),t._v(" - Kafka é›†ç¾¤åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªèŠ‚ç‚¹ï¼Œè¿™ç§èŠ‚ç‚¹è¢«ç§°ä¸º Brokerã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Topic")]),t._v("ï¼šTopic æ˜¯æ‰¿è½½æ¶ˆæ¯çš„é€»è¾‘å®¹å™¨ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­å¤šç”¨æ¥åŒºåˆ†å…·ä½“çš„ä¸šåŠ¡ã€‚ä¸åŒ Topic çš„æ¶ˆæ¯æ˜¯ç‰©ç†éš”ç¦»çš„ï¼›åŒä¸€ä¸ª Topic çš„æ¶ˆæ¯ä¿å­˜åœ¨ä¸€ä¸ªæˆ–å¤šä¸ª Broker ä¸Šï¼Œä½†ç”¨æˆ·åªéœ€æŒ‡å®šæ¶ˆæ¯çš„ Topic å³å¯ç”Ÿäº§æˆ–æ¶ˆè´¹æ•°æ®è€Œä¸å¿…å…³å¿ƒæ•°æ®å­˜äºä½•å¤„ã€‚å¯¹äºæ¯ä¸€ä¸ª Topicï¼Œ Kafka é›†ç¾¤éƒ½ä¼šç»´æŒä¸€ä¸ªåˆ†åŒºæ—¥å¿—ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Partition")]),t._v("ï¼šåˆ†åŒºã€‚ä¸€ä¸ªæœ‰åºä¸å˜çš„æ¶ˆæ¯åºåˆ—ã€‚ä¸ºäº†æé«˜ Kafka çš„ååç‡ï¼Œæ¯ä¸ª Topic åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ª Partitionï¼Œæ¯ä¸ª Partition åœ¨ç‰©ç†ä¸Šå¯¹åº”ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œè¯¥æ–‡ä»¶å¤¹ä¸‹å­˜å‚¨è¿™ä¸ª Partition çš„æ‰€æœ‰æ¶ˆæ¯å’Œç´¢å¼•æ–‡ä»¶ã€‚Kafka æ—¥å¿—çš„ Partition åˆ†å¸ƒåœ¨ Kafka é›†ç¾¤çš„èŠ‚ç‚¹ä¸Šã€‚æ¯ä¸ªèŠ‚ç‚¹åœ¨å¤„ç†æ•°æ®å’Œè¯·æ±‚æ—¶ï¼Œå…±äº«è¿™äº› Partitionã€‚æ¯ä¸€ä¸ª Partition éƒ½ä¼šåœ¨å·²é…ç½®çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œå¤‡ä»½ï¼Œç¡®ä¿å®¹é”™æ€§ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Offset")]),t._v("ï¼šæ¶ˆæ¯ä½ç§»ã€‚è¡¨ç¤ºåˆ†åŒºä¸­æ¯æ¡æ¶ˆæ¯çš„ä½ç½®ä¿¡æ¯ï¼Œæ˜¯ä¸€ä¸ªå•è°ƒé€’å¢ä¸”ä¸å˜çš„å€¼ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Replica")]),t._v("ï¼šå‰¯æœ¬ã€‚Kafka ä¸­åŒä¸€æ¡æ¶ˆæ¯èƒ½å¤Ÿè¢«æ‹·è´åˆ°å¤šä¸ªåœ°æ–¹ä»¥æä¾›æ•°æ®å†—ä½™ï¼Œè¿™äº›åœ°æ–¹å°±æ˜¯æ‰€è°“çš„å‰¯æœ¬ã€‚å‰¯æœ¬è¿˜åˆ†ä¸ºé¢†å¯¼è€…å‰¯æœ¬å’Œè¿½éšè€…å‰¯æœ¬ï¼Œå„è‡ªæœ‰ä¸åŒçš„è§’è‰²åˆ’åˆ†ã€‚å‰¯æœ¬æ˜¯åœ¨åˆ†åŒºå±‚çº§ä¸‹çš„ï¼Œå³æ¯ä¸ªåˆ†åŒºå¯é…ç½®å¤šä¸ªå‰¯æœ¬å®ç°é«˜å¯ç”¨ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Producer")]),t._v("ï¼šç”Ÿäº§è€…ã€‚å‘ä¸»é¢˜å‘å¸ƒæ–°æ¶ˆæ¯çš„åº”ç”¨ç¨‹åºã€‚Producer å¯ä»¥å°†æ•°æ®å‘å¸ƒåˆ°æ‰€é€‰æ‹©çš„ Topic ä¸­ã€‚Producer è´Ÿè´£å°†è®°å½•åˆ†é…åˆ° Topic ä¸­çš„å“ªä¸€ä¸ª Partition ä¸­ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Consumer")]),t._v("ï¼šæ¶ˆè´¹è€…ã€‚ä»ä¸»é¢˜è®¢é˜…æ–°æ¶ˆæ¯çš„åº”ç”¨ç¨‹åºã€‚Consumer ä½¿ç”¨ä¸€ä¸ª Consumer Group æ¥è¿›è¡Œæ ‡è¯†ï¼Œå‘å¸ƒåˆ° Topic ä¸­çš„æ¯æ¡è®°å½•è¢«åˆ†é…ç»™è®¢é˜… Consumer Group ä¸­çš„ä¸€ä¸ª Consumerï¼ŒConsumer å¯ä»¥åˆ†å¸ƒåœ¨å¤šä¸ªè¿›ç¨‹ä¸­æˆ–è€…å¤šä¸ªæœºå™¨ä¸Šã€‚\n"),s("ul",[s("li",[t._v("å¦‚æœæ‰€æœ‰çš„ Consumer åœ¨åŒä¸€ Consumer Group ä¸­ï¼Œæ¶ˆæ¯è®°å½•ä¼šè´Ÿè½½å¹³è¡¡åˆ°æ¯ä¸€ä¸ª Consumerã€‚")]),t._v(" "),s("li",[t._v("å¦‚æœæ‰€æœ‰çš„ Consumer åœ¨ä¸åŒçš„ Consumer Group ä¸­ï¼Œæ¯æ¡æ¶ˆæ¯è®°å½•ä¼šå¹¿æ’­åˆ°æ‰€æœ‰çš„ Consumerã€‚")])])]),t._v(" "),s("li",[s("strong",[t._v("Consumer Group")]),t._v("ï¼šæ¶ˆè´¹è€…ç»„ã€‚å¤šä¸ª Consumer å®ä¾‹å…±åŒç»„æˆçš„ä¸€ä¸ªç»„ï¼ŒåŒæ—¶æ¶ˆè´¹å¤šä¸ªåˆ†åŒºä»¥å®ç°é«˜ååã€‚æ¯ä¸ª Consumer å±äºä¸€ä¸ªç‰¹å®šçš„ Consumer Groupï¼ˆå¯ä»¥ä¸ºæ¯ä¸ª Consumer æŒ‡å®š group nameï¼Œè‹¥ä¸æŒ‡å®š Group åˆ™å±äºé»˜è®¤çš„ Groupï¼‰ã€‚"),s("strong",[t._v("åœ¨åŒä¸€ä¸ª Group ä¸­ï¼Œæ¯ä¸€ä¸ª Consumer å¯ä»¥æ¶ˆè´¹å¤šä¸ª Partitionï¼Œä½†æ˜¯ä¸€ä¸ª Partition åªèƒ½æŒ‡å®šç»™ä¸€ä¸ªè¿™ä¸ª Group ä¸­ä¸€ä¸ª Consumer")]),t._v("ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Consumer Offset")]),t._v("ï¼šæ¶ˆè´¹è€…ä½ç§»ã€‚è¡¨å¾æ¶ˆè´¹è€…æ¶ˆè´¹è¿›åº¦ï¼Œæ¯ä¸ªæ¶ˆè´¹è€…éƒ½æœ‰è‡ªå·±çš„æ¶ˆè´¹è€…ä½ç§»ã€‚")]),t._v(" "),s("li",[s("strong",[t._v("Rebalance")]),t._v("ï¼šé‡å¹³è¡¡ã€‚ æ¶ˆè´¹è€…ç»„å†…æŸä¸ªæ¶ˆè´¹è€…å®ä¾‹æŒ‚æ‰åï¼Œå…¶ä»–æ¶ˆè´¹è€…å®ä¾‹è‡ªåŠ¨é‡æ–°åˆ†é…è®¢é˜…ä¸»é¢˜åˆ†åŒºçš„è¿‡ç¨‹ã€‚Rebalance æ˜¯ Kafka æ¶ˆè´¹è€…ç«¯å®ç°é«˜å¯ç”¨çš„é‡è¦æ‰‹æ®µã€‚")])]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"http://kafka.apachecn.org/10/images/consumer-groups.png"}})]),t._v("\n### Kafka åŸºæœ¬å·¥ä½œæµç¨‹\n"),s("p",[t._v("Kafka é€šè¿‡ Topic å¯¹å­˜å‚¨çš„æµæ•°æ®è¿›è¡Œåˆ†ç±»ã€‚")]),t._v(" "),s("p",[t._v("Topic å°±æ˜¯æ•°æ®ä¸»é¢˜ï¼Œæ˜¯æ•°æ®è®°å½•å‘å¸ƒçš„åœ°æ–¹ï¼Œå¯ä»¥ç”¨æ¥åŒºåˆ†ä¸šåŠ¡ç³»ç»Ÿã€‚ä¸€ä¸ª Topic å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ¶ˆè´¹è€…æ¥è®¢é˜…å®ƒçš„æ•°æ®ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ Kafka ä¸­ï¼Œä»»æ„ä¸€ä¸ª Topic ç»´æŠ¤ä¸€ä¸ª Partition æ—¥å¿—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/cs/java/javaweb/distributed/mq/kafka/kafka-log-anatomy.png",width:"400"}})]),t._v(" "),s("p",[t._v("æ¯ä¸ª Partition éƒ½æ˜¯ä¸€ä¸ªæœ‰åºçš„ã€ä¸å¯å˜çš„è®°å½•åºåˆ—ï¼Œä¸æ–­è¿½åŠ åˆ°ç»“æ„åŒ–çš„æäº¤æ—¥å¿—ä¸­ã€‚Partition ä¸­çš„è®°å½•æ¯ä¸ªåˆ†é…ä¸€ä¸ªè¿ç»­çš„ id å·ï¼Œç§°ä¸ºåç§»é‡ï¼ˆOffsetï¼‰ï¼Œç”¨äºå”¯ä¸€æ ‡è¯† Partition å†…çš„æ¯æ¡è®°å½•ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("Kafka é›†ç¾¤æŒä¹…åŒ–ä¿å­˜ï¼ˆä½¿ç”¨å¯é…ç½®çš„ä¿ç•™æœŸé™ï¼‰æ‰€æœ‰å‘å¸ƒè®°å½•â€”â€”æ— è®ºå®ƒä»¬æ˜¯å¦è¢«æ¶ˆè´¹")]),t._v("ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¿ç•™æœŸé™è¢«è®¾ç½®ä¸ºä¸¤å¤©ï¼Œåˆ™åœ¨è®°å½•å‘å¸ƒåçš„ä¸¤å¤©ä¹‹å†…ï¼Œå®ƒéƒ½å¯ä»¥è¢«æ¶ˆè´¹ï¼Œè¶…è¿‡æ—¶é—´åå°†è¢«ä¸¢å¼ƒä»¥é‡Šæ”¾ç©ºé—´ã€‚Kafka çš„æ€§èƒ½å’Œæ•°æ®å¤§å°æ— å…³ï¼Œæ‰€ä»¥é•¿æ—¶é—´å­˜å‚¨æ•°æ®æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"http://kafka.apachecn.org/10/images/log_consumer.png",width:"400"}})]),t._v(" "),s("p",[t._v("å®é™…ä¸Šï¼Œä¿ç•™åœ¨æ¯ä¸ª Consumer åŸºç¡€ä¸Šçš„å”¯ä¸€å…ƒæ•°æ®æ˜¯è¯¥ Consumer åœ¨æ—¥å¿—ä¸­æ¶ˆè´¹çš„ä½ç½®ã€‚è¿™ä¸ªåç§»é‡æ˜¯ç”± Consumer æ§åˆ¶çš„ï¼šConsumer é€šå¸¸ä¼šåœ¨è¯»å–è®°å½•æ—¶çº¿æ€§çš„å¢åŠ å…¶åç§»é‡ã€‚ä½†å®é™…ä¸Šï¼Œç”±äºä½ç½®ç”± Consumer æ§åˆ¶ï¼Œæ‰€ä»¥ Consumer å¯ä»¥é‡‡ç”¨ä»»ä½•é¡ºåºæ¥æ¶ˆè´¹è®°å½•ã€‚")]),t._v(" "),s("p",[t._v("æ—¥å¿—ä¸­çš„ Partition æœ‰ä»¥ä¸‹å‡ ä¸ªç”¨é€”ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é¦–å…ˆï¼Œå®ƒä»¬å…è®¸æ—¥å¿—çš„å¤§å°è¶…å‡ºæœåŠ¡å™¨é™åˆ¶çš„å¤§å°ã€‚æ¯ä¸ªå•ç‹¬çš„ Partition å¿…é¡»é€‚åˆæ‰¿è½½å®ƒçš„æœåŠ¡å™¨ï¼Œä½†æ˜¯ä¸€ä¸ª Topic å¯èƒ½æœ‰å¾ˆå¤š Partitionï¼Œå› æ­¤å®ƒå¯ä»¥å¤„ç†ä»»æ„æ•°é‡çš„æ•°æ®ã€‚")]),t._v(" "),s("li",[t._v("å…¶æ¬¡ï¼Œå®ƒå¯ä»¥ä½œä¸ºå¹¶è¡Œçš„å•ä½ã€‚")])]),t._v(" "),s("p",[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/cs/java/javaweb/distributed/mq/kafka/kafka-producer-consumer.png",alt:"img"}})]),t._v(" "),s("h2",{attrs:{id:"å¿«é€Ÿå…¥é—¨"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¿«é€Ÿå…¥é—¨"}},[t._v("#")]),t._v(" å¿«é€Ÿå…¥é—¨")]),t._v(" "),s("h3",{attrs:{id:"å¼•å…¥ä¾èµ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼•å…¥ä¾èµ–"}},[t._v("#")]),t._v(" å¼•å…¥ä¾èµ–")]),t._v(" "),s("p",[t._v("Stream API çš„ maven ä¾èµ–ï¼š")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.kafka"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("kafka-streams"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.1.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("å…¶ä»– API çš„ maven ä¾èµ–ï¼š")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("org.apache.kafka"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("groupId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("kafka-clients"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("artifactId")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1.1.0"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("version")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependency")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"kafka-æ ¸å¿ƒ-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka-æ ¸å¿ƒ-api"}},[t._v("#")]),t._v(" Kafka æ ¸å¿ƒ API")]),t._v(" "),s("p",[t._v("Kafka æœ‰ 4 ä¸ªæ ¸å¿ƒ API")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/cs/java/javaweb/distributed/mq/kafka/kafka-core-api.png",width:"400"}})]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://kafka.apache.org/documentation.html#producerapi",target:"_blank",rel:"noopener noreferrer"}},[t._v("Producer API"),s("OutboundLink")],1),t._v(" - å…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºå‘å¸ƒä¸€ä¸²æµå¼æ•°æ®åˆ°ä¸€ä¸ªæˆ–è€…å¤šä¸ª Kafka Topicã€‚")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://kafka.apache.org/documentation.html#consumerapi",target:"_blank",rel:"noopener noreferrer"}},[t._v("Consumer API"),s("OutboundLink")],1),t._v(" - å…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºè®¢é˜…ä¸€ä¸ªæˆ–å¤šä¸ª Kafka Topicï¼Œå¹¶ä¸”å¯¹å‘å¸ƒç»™ä»–ä»¬çš„æµå¼æ•°æ®è¿›è¡Œå¤„ç†ã€‚")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://kafka.apache.org/documentation/streams",target:"_blank",rel:"noopener noreferrer"}},[t._v("Streams API"),s("OutboundLink")],1),t._v(" - å…è®¸ä¸€ä¸ªåº”ç”¨ç¨‹åºä½œä¸ºä¸€ä¸ªæµå¤„ç†å™¨ï¼Œæ¶ˆè´¹ä¸€ä¸ªæˆ–è€…å¤šä¸ª Kafka Topic äº§ç”Ÿçš„è¾“å…¥æµï¼Œç„¶åç”Ÿäº§ä¸€ä¸ªè¾“å‡ºæµåˆ°ä¸€ä¸ªæˆ–å¤šä¸ª Kafka Topic ä¸­å»ï¼Œåœ¨è¾“å…¥è¾“å‡ºæµä¸­è¿›è¡Œæœ‰æ•ˆçš„è½¬æ¢ã€‚")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://kafka.apache.org/documentation.html#connect",target:"_blank",rel:"noopener noreferrer"}},[t._v("Connector API"),s("OutboundLink")],1),t._v(" - å…è®¸æ„å»ºå¹¶è¿è¡Œå¯é‡ç”¨çš„ç”Ÿäº§è€…æˆ–è€…æ¶ˆè´¹è€…ï¼Œå°† Kafka Topic è¿æ¥åˆ°å·²å­˜åœ¨çš„åº”ç”¨ç¨‹åºæˆ–æ•°æ®åº“ã€‚ä¾‹å¦‚ï¼Œè¿æ¥åˆ°ä¸€ä¸ªå…³ç³»å‹æ•°æ®åº“ï¼Œæ•æ‰è¡¨çš„æ‰€æœ‰å˜æ›´å†…å®¹ã€‚")])]),t._v(" "),s("h3",{attrs:{id:"å‘é€æ¶ˆæ¯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‘é€æ¶ˆæ¯"}},[t._v("#")]),t._v(" å‘é€æ¶ˆæ¯")]),t._v(" "),s("h4",{attrs:{id:"å‘é€å¹¶å¿½ç•¥è¿”å›"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‘é€å¹¶å¿½ç•¥è¿”å›"}},[t._v("#")]),t._v(" å‘é€å¹¶å¿½ç•¥è¿”å›")]),t._v(" "),s("p",[t._v("ä»£ç å¦‚ä¸‹ï¼Œç›´æ¥é€šè¿‡ "),s("code",[t._v("send")]),t._v(" æ–¹æ³•æ¥å‘é€")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerRecord")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerRecord")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CustomerCountry"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Precision Products"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"France"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"åŒæ­¥å‘é€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#åŒæ­¥å‘é€"}},[t._v("#")]),t._v(" åŒæ­¥å‘é€")]),t._v(" "),s("p",[t._v("ä»£ç å¦‚ä¸‹ï¼Œä¸â€œå‘é€å¹¶å¿˜è®°â€çš„æ–¹å¼åŒºåˆ«åœ¨äºå¤šäº†ä¸€ä¸ª "),s("code",[t._v("get")]),t._v(" æ–¹æ³•ï¼Œä¼šä¸€ç›´é˜»å¡ç­‰å¾… "),s("code",[t._v("Broker")]),t._v(" è¿”å›ç»“æœï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerRecord")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerRecord")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CustomerCountry"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Precision Products"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"France"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"å¼‚æ­¥å‘é€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å¼‚æ­¥å‘é€"}},[t._v("#")]),t._v(" å¼‚æ­¥å‘é€")]),t._v(" "),s("p",[t._v("ä»£ç å¦‚ä¸‹ï¼Œå¼‚æ­¥æ–¹å¼ç›¸å¯¹äºâ€œå‘é€å¹¶å¿½ç•¥è¿”å›â€çš„æ–¹å¼çš„ä¸åŒåœ¨äºï¼šåœ¨å¼‚æ­¥è¿”å›æ—¶å¯ä»¥æ‰§è¡Œä¸€äº›æ“ä½œï¼Œå¦‚è®°å½•é”™è¯¯æˆ–è€…æˆåŠŸæ—¥å¿—ã€‚")]),t._v(" "),s("p",[t._v("é¦–å…ˆï¼Œå®šä¹‰ä¸€ä¸ª callback")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DemoProducerCallback")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("implements")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Callback")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onCompletion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RecordMetadata")]),t._v(" recordMetadata"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n           "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("e "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n               e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n             "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("ç„¶åï¼Œä½¿ç”¨è¿™ä¸ª callback")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerRecord")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerRecord")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CustomerCountry"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Biomedical Materials"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"USA"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nproducer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DemoProducerCallback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h4",{attrs:{id:"å‘é€æ¶ˆæ¯ç¤ºä¾‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‘é€æ¶ˆæ¯ç¤ºä¾‹"}},[t._v("#")]),t._v(" å‘é€æ¶ˆæ¯ç¤ºä¾‹")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kafka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clients"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("producer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KafkaProducer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kafka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clients"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("producer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Producer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kafka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clients"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("producer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kafka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clients"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("producer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerRecord")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Kafka ç”Ÿäº§è€…ç”Ÿäº§æ¶ˆæ¯ç¤ºä¾‹ ç”Ÿäº§è€…é…ç½®å‚è€ƒï¼šhttps://kafka.apache.org/documentation/#producerconfigs\n */")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerDemo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" HOST "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:9092"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("main")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1. æŒ‡å®šç”Ÿäº§è€…çš„é…ç½®")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),t._v(" properties "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BOOTSTRAP_SERVERS_CONFIG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HOST"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ACKS_CONFIG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"all"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("RETRIES_CONFIG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BATCH_SIZE_CONFIG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16384")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("LINGER_MS_CONFIG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("BUFFER_MEMORY_CONFIG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("33554432")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("KEY_SERIALIZER_CLASS_CONFIG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.apache.kafka.common.serialization.StringSerializer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("VALUE_SERIALIZER_CLASS_CONFIG"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.apache.kafka.common.serialization.StringSerializer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2. ä½¿ç”¨é…ç½®åˆå§‹åŒ– Kafka ç”Ÿäº§è€…")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Producer")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" producer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KafkaProducer")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("properties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3. ä½¿ç”¨ send æ–¹æ³•å‘é€å¼‚æ­¥æ¶ˆæ¯")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" msg "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Message "')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ProducerRecord")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"HelloWorld"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Sent:"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" msg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4. å…³é—­ç”Ÿäº§è€…")]),t._v("\n            producer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"æ¶ˆè´¹æ¶ˆæ¯æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆè´¹æ¶ˆæ¯æµç¨‹"}},[t._v("#")]),t._v(" æ¶ˆè´¹æ¶ˆæ¯æµç¨‹")]),t._v(" "),s("h4",{attrs:{id:"æ¶ˆè´¹æµç¨‹"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆè´¹æµç¨‹"}},[t._v("#")]),t._v(" æ¶ˆè´¹æµç¨‹")]),t._v(" "),s("p",[t._v("å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š")]),t._v(" "),s("ol",[s("li",[t._v("åˆ›å»ºæ¶ˆè´¹è€…ã€‚")]),t._v(" "),s("li",[t._v("è®¢é˜…ä¸»é¢˜ã€‚é™¤äº†è®¢é˜…ä¸»é¢˜æ–¹å¼å¤–è¿˜æœ‰ä½¿ç”¨æŒ‡å®šåˆ†ç»„çš„æ¨¡å¼ï¼Œä½†æ˜¯å¸¸ç”¨æ–¹å¼éƒ½æ˜¯è®¢é˜…ä¸»é¢˜æ–¹å¼")]),t._v(" "),s("li",[t._v("è½®è¯¢æ¶ˆæ¯ã€‚é€šè¿‡ poll æ–¹æ³•è½®è¯¢ã€‚")]),t._v(" "),s("li",[t._v("å…³é—­æ¶ˆè´¹è€…ã€‚åœ¨ä¸ç”¨æ¶ˆè´¹è€…ä¹‹åï¼Œä¼šæ‰§è¡Œ close æ“ä½œã€‚close æ“ä½œä¼šå…³é—­ socketï¼Œå¹¶è§¦å‘å½“å‰æ¶ˆè´¹è€…ç¾¤ç»„çš„å†å‡è¡¡ã€‚")])]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.æ„å»ºKafkaCustomer")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Consumer")]),t._v(" consumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildCustomer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.è®¾ç½®ä¸»é¢˜")]),t._v("\n    consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.æ¥å—æ¶ˆæ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerRecords")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" records "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("poll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"customer Message---"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerRecord")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" records"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n                "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// print the offset,key and value for the consumer records.")]),t._v("\n                "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"offset = %d, key = %s, value = %s\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 4.å…³é—­æ¶ˆæ¯")]),t._v("\n            consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("close")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("åˆ›å»ºæ¶ˆè´¹è€…çš„ä»£ç å¦‚ä¸‹ï¼š")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Consumer")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildCustomer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),t._v(" props "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Properties")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bootstrap.serversæ˜¯Kafkaé›†ç¾¤çš„IPåœ°å€ã€‚å¤šä¸ªæ—¶,ä½¿ç”¨é€—å·éš”å¼€")]),t._v("\n    props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bootstrap.servers"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost:9092"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// æ¶ˆè´¹è€…ç¾¤ç»„")]),t._v("\n    props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"group.id"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"enable.auto.commit"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"true"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"auto.commit.interval.ms"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1000"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"session.timeout.ms"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"30000"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key.deserializer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.apache.kafka.common.serialization.StringDeserializer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("put")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value.deserializer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"org.apache.kafka.common.serialization.StringDeserializer"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KafkaConsumer")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" consumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("KafkaConsumer")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("props"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h4",{attrs:{id:"æ¶ˆè´¹æ¶ˆæ¯æ–¹å¼"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æ¶ˆè´¹æ¶ˆæ¯æ–¹å¼"}},[t._v("#")]),t._v(" æ¶ˆè´¹æ¶ˆæ¯æ–¹å¼")]),t._v(" "),s("p",[t._v("åˆ†ä¸ºè®¢é˜…ä¸»é¢˜å’ŒæŒ‡å®šåˆ†ç»„ä¸¤ç§æ–¹å¼ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("æ¶ˆè´¹è€…åˆ†ç»„æ¨¡å¼ã€‚é€šè¿‡è®¢é˜…ä¸»é¢˜æ–¹å¼æ—¶ï¼Œæ¶ˆè´¹è€…å¿…é¡»åŠ å…¥åˆ°æ¶ˆè´¹è€…ç¾¤ç»„ä¸­ï¼Œå³æ¶ˆè´¹è€…å¿…é¡»æœ‰ä¸€ä¸ªè‡ªå·±çš„åˆ†ç»„ï¼›")]),t._v(" "),s("li",[t._v("ç‹¬ç«‹æ¶ˆè´¹è€…æ¨¡å¼ã€‚è¿™ç§æ¨¡å¼å°±æ˜¯æ¶ˆè´¹è€…æ˜¯ç‹¬ç«‹çš„ä¸å±äºä»»ä½•æ¶ˆè´¹è€…åˆ†ç»„ï¼Œè‡ªå·±æŒ‡å®šæ¶ˆè´¹é‚£äº› "),s("code",[t._v("Partition")]),t._v("ã€‚")])]),t._v(" "),s("p",[t._v("1ã€è®¢é˜…ä¸»é¢˜æ–¹å¼")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[t._v("consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("subscribe")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Arrays")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("asList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("p",[t._v("2ã€ç‹¬ç«‹æ¶ˆè´¹è€…æ¨¡å¼")]),t._v(" "),s("p",[t._v("é€šè¿‡ consumer çš„ "),s("code",[t._v("assign(Collection<TopicPartition> partitions)")]),t._v(" æ–¹æ³•æ¥ä¸ºæ¶ˆè´¹è€…æŒ‡å®šåˆ†åŒºã€‚")]),t._v(" "),s("div",{staticClass:"language-java extra-class"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("consumeMessageForIndependentConsumer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 1.æ„å»ºKafkaCustomer")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Consumer")]),t._v(" consumer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildCustomer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.æŒ‡å®šåˆ†åŒº")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.1è·å–å¯ç”¨åˆ†åŒº")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PartitionInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" partitionInfoList "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("buildCustomer")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("partitionsFor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 2.2æŒ‡å®šåˆ†åŒº,è¿™é‡Œæ˜¯æŒ‡å®šäº†æ‰€æœ‰åˆ†åŒº,ä¹Ÿå¯ä»¥æŒ‡å®šä¸ªåˆ«çš„åˆ†åŒº")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!=")]),t._v(" partitionInfoList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("List")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TopicPartition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" partitions "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Lists")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("newArrayList")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("PartitionInfo")]),t._v(" partitionInfo "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" partitionInfoList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            partitions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TopicPartition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("partitionInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("topic")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("partitionInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("partition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("assign")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("partitions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 3.æ¥å—æ¶ˆæ¯")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerRecords")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" records "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("poll")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"consume Message---"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ConsumerRecord")]),s("span",{pre:!0,attrs:{class:"token generics"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" records"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// print the offset,key and value for the consumer records.")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("printf")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"offset = %d, key = %s, value = %s\\n"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("offset")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("key")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("record")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// å¼‚æ­¥æäº¤")]),t._v("\n            consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("commitAsync")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"æŒä¹…åŒ–"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#æŒä¹…åŒ–"}},[t._v("#")]),t._v(" æŒä¹…åŒ–")]),t._v(" "),s("p",[t._v("åœ¨åŸºæœ¬å·¥ä½œæµç¨‹ä¸­æåˆ°äº†ï¼š"),s("strong",[t._v("Kafka é›†ç¾¤æŒä¹…åŒ–ä¿å­˜ï¼ˆä½¿ç”¨å¯é…ç½®çš„ä¿ç•™æœŸé™ï¼‰æ‰€æœ‰å‘å¸ƒè®°å½•â€”â€”æ— è®ºå®ƒä»¬æ˜¯å¦è¢«æ¶ˆè´¹")]),t._v("ã€‚Kafka æ˜¯å¦‚ä½•å®ç°æŒä¹…åŒ–çš„å‘¢ï¼Ÿ")]),t._v(" "),s("p",[s("strong",[t._v("Kafka å¯¹æ¶ˆæ¯çš„å­˜å‚¨å’Œç¼“å­˜ä¸¥é‡ä¾èµ–äºæ–‡ä»¶ç³»ç»Ÿ")]),t._v("ã€‚")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("é¡ºåºç£ç›˜è®¿é—®åœ¨æŸäº›æƒ…å†µä¸‹æ¯”éšæœºå†…å­˜è®¿é—®è¿˜è¦å¿«ï¼åœ¨ Kafka ä¸­ï¼Œæ‰€æœ‰æ•°æ®ä¸€å¼€å§‹å°±è¢«å†™å…¥åˆ°æ–‡ä»¶ç³»ç»Ÿçš„æŒä¹…åŒ–æ—¥å¿—ä¸­ï¼Œè€Œä¸ç”¨åœ¨ cache ç©ºé—´ä¸è¶³çš„æ—¶å€™ flush åˆ°ç£ç›˜ã€‚å®é™…ä¸Šï¼Œè¿™è¡¨æ˜æ•°æ®è¢«è½¬ç§»åˆ°äº†å†…æ ¸çš„ pagecache ä¸­ã€‚æ‰€ä»¥ï¼Œ"),s("strong",[t._v("è™½ç„¶ Kafka æ•°æ®å­˜å‚¨åœ¨ç£ç›˜ä¸­ï¼Œä½†å…¶è®¿é—®æ€§èƒ½ä¹Ÿä¸ä½")]),t._v("ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("Kafka çš„åè®®æ˜¯å»ºç«‹åœ¨ä¸€ä¸ª â€œæ¶ˆæ¯å—â€ çš„æŠ½è±¡åŸºç¡€ä¸Šï¼Œåˆç†å°†æ¶ˆæ¯åˆ†ç»„ã€‚ è¿™ä½¿å¾—ç½‘ç»œè¯·æ±‚å°†å¤šä¸ªæ¶ˆæ¯æ‰“åŒ…æˆä¸€ç»„ï¼Œè€Œä¸æ˜¯æ¯æ¬¡å‘é€ä¸€æ¡æ¶ˆæ¯ï¼Œä»è€Œä½¿æ•´ç»„æ¶ˆæ¯åˆ†æ‹…ç½‘ç»œä¸­å¾€è¿”çš„å¼€é”€ã€‚Consumer æ¯æ¬¡è·å–å¤šä¸ªå¤§å‹æœ‰åºçš„æ¶ˆæ¯å—ï¼Œå¹¶ç”±æœåŠ¡ç«¯ä¾æ¬¡å°†æ¶ˆæ¯å—ä¸€æ¬¡åŠ è½½åˆ°å®ƒçš„æ—¥å¿—ä¸­ã€‚è¿™å¯ä»¥"),s("strong",[t._v("æœ‰æ•ˆå‡å°‘å¤§é‡çš„å°å‹ I/O æ“ä½œ")]),t._v("ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("ç”±äº Kafka åœ¨ Producerã€Broker å’Œ Consumer éƒ½"),s("strong",[t._v("å…±äº«æ ‡å‡†åŒ–çš„äºŒè¿›åˆ¶æ¶ˆæ¯æ ¼å¼")]),t._v("ï¼Œè¿™æ ·æ•°æ®å—ä¸ç”¨ä¿®æ”¹å°±èƒ½åœ¨ä»–ä»¬ä¹‹é—´ä¼ é€’ã€‚è¿™å¯ä»¥"),s("strong",[t._v("é¿å…å­—èŠ‚æ‹·è´å¸¦æ¥çš„å¼€é”€")]),t._v("ã€‚")])]),t._v(" "),s("li",[s("p",[t._v("Kafka ä»¥é«˜æ•ˆçš„æ‰¹å¤„ç†æ ¼å¼æ”¯æŒä¸€æ‰¹æ¶ˆæ¯å¯ä»¥å‹ç¼©åœ¨ä¸€èµ·å‘é€åˆ°æœåŠ¡å™¨ã€‚è¿™æ‰¹æ¶ˆæ¯å°†ä»¥å‹ç¼©æ ¼å¼å†™å…¥ï¼Œå¹¶ä¸”åœ¨æ—¥å¿—ä¸­ä¿æŒå‹ç¼©ï¼Œåªä¼šåœ¨ Consumer æ¶ˆè´¹æ—¶è§£å‹ç¼©ã€‚"),s("strong",[t._v("å‹ç¼©ä¼ è¾“æ•°æ®ï¼Œå¯ä»¥æœ‰æ•ˆå‡å°‘ç½‘ç»œå¸¦å®½å¼€é”€")]),t._v("ã€‚")]),t._v(" "),s("ul",[s("li",[t._v("Kafka æ”¯æŒ GZIPï¼ŒSnappy å’Œ LZ4 å‹ç¼©åè®®ã€‚")])])])]),t._v(" "),s("p",[t._v("æ‰€æœ‰è¿™äº›ä¼˜åŒ–éƒ½å…è®¸ Kafka ä»¥æ¥è¿‘ç½‘ç»œé€Ÿåº¦ä¼ é€’æ¶ˆæ¯ã€‚")]),t._v(" "),s("h2",{attrs:{id:"kafka-åˆ†åŒº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#kafka-åˆ†åŒº"}},[t._v("#")]),t._v(" Kafka åˆ†åŒº")]),t._v(" "),s("h3",{attrs:{id:"ä»€ä¹ˆæ˜¯åˆ†åŒº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä»€ä¹ˆæ˜¯åˆ†åŒº"}},[t._v("#")]),t._v(" ä»€ä¹ˆæ˜¯åˆ†åŒº")]),t._v(" "),s("p",[t._v("Kafka é€šè¿‡ Topic å¯¹å­˜å‚¨çš„æµæ•°æ®è¿›è¡Œåˆ†ç±»ã€‚Topic å°±æ˜¯æ•°æ®ä¸»é¢˜ï¼Œæ˜¯æ•°æ®è®°å½•å‘å¸ƒçš„åœ°æ–¹ï¼Œå¯ä»¥ç”¨æ¥åŒºåˆ†ä¸šåŠ¡ç³»ç»Ÿã€‚ä¸€ä¸ª Topic å¯ä»¥æ‹¥æœ‰ä¸€ä¸ªæˆ–è€…å¤šä¸ªæ¶ˆè´¹è€…æ¥è®¢é˜…å®ƒçš„æ•°æ®ã€‚")]),t._v(" "),s("p",[t._v("åœ¨ Kafka ä¸­ï¼Œä»»æ„ä¸€ä¸ª Topic ç»´æŠ¤ä¸€ä¸ª Partition æ—¥å¿—ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/cs/java/javaweb/distributed/mq/kafka/kafka-log-anatomy.png",width:"400"}})]),t._v(" "),s("p",[t._v("æ¯ä¸ª Partition éƒ½æ˜¯ä¸€ä¸ªæœ‰åºçš„ã€ä¸å¯å˜çš„è®°å½•åºåˆ—ï¼Œä¸æ–­è¿½åŠ åˆ°ç»“æ„åŒ–çš„æäº¤æ—¥å¿—ä¸­ã€‚Partition ä¸­çš„è®°å½•æ¯ä¸ªåˆ†é…ä¸€ä¸ªè¿ç»­çš„ id å·ï¼Œç§°ä¸ºåç§»é‡ï¼ˆOffsetï¼‰ï¼Œç”¨äºå”¯ä¸€æ ‡è¯† Partition å†…çš„æ¯æ¡è®°å½•ã€‚")]),t._v(" "),s("p",[s("strong",[t._v("Kafka é›†ç¾¤æŒä¹…åŒ–ä¿å­˜ï¼ˆä½¿ç”¨å¯é…ç½®çš„ä¿ç•™æœŸé™ï¼‰æ‰€æœ‰å‘å¸ƒè®°å½•â€”â€”æ— è®ºå®ƒä»¬æ˜¯å¦è¢«æ¶ˆè´¹")]),t._v("ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä¿ç•™æœŸé™è¢«è®¾ç½®ä¸ºä¸¤å¤©ï¼Œåˆ™åœ¨è®°å½•å‘å¸ƒåçš„ä¸¤å¤©ä¹‹å†…ï¼Œå®ƒéƒ½å¯ä»¥è¢«æ¶ˆè´¹ï¼Œè¶…è¿‡æ—¶é—´åå°†è¢«ä¸¢å¼ƒä»¥é‡Šæ”¾ç©ºé—´ã€‚Kafka çš„æ€§èƒ½å’Œæ•°æ®å¤§å°æ— å…³ï¼Œæ‰€ä»¥é•¿æ—¶é—´å­˜å‚¨æ•°æ®æ²¡æœ‰ä»€ä¹ˆé—®é¢˜ã€‚")]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"http://kafka.apachecn.org/10/images/log_consumer.png",width:"400"}})]),t._v(" "),s("p",[t._v("å®é™…ä¸Šï¼Œä¿ç•™åœ¨æ¯ä¸ª Consumer åŸºç¡€ä¸Šçš„å”¯ä¸€å…ƒæ•°æ®æ˜¯è¯¥ Consumer åœ¨æ—¥å¿—ä¸­æ¶ˆè´¹çš„ä½ç½®ã€‚è¿™ä¸ªåç§»é‡æ˜¯ç”± Consumer æ§åˆ¶çš„ï¼šConsumer é€šå¸¸ä¼šåœ¨è¯»å–è®°å½•æ—¶çº¿æ€§çš„å¢åŠ å…¶åç§»é‡ã€‚ä½†å®é™…ä¸Šï¼Œç”±äºä½ç½®ç”± Consumer æ§åˆ¶ï¼Œæ‰€ä»¥ Consumer å¯ä»¥é‡‡ç”¨ä»»ä½•é¡ºåºæ¥æ¶ˆè´¹è®°å½•ã€‚")]),t._v(" "),s("h3",{attrs:{id:"ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†åŒº"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†åŒº"}},[t._v("#")]),t._v(" ä¸ºä»€ä¹ˆè¦ä½¿ç”¨åˆ†åŒº")]),t._v(" "),s("p",[t._v("å¯¹æ•°æ®è¿›è¡Œåˆ†åŒºçš„ä¸»è¦åŸå› ï¼Œå°±æ˜¯ä¸ºäº†å®ç°ç³»ç»Ÿçš„"),s("strong",[t._v("ä¼¸ç¼©æ€§")]),t._v("ã€‚ä¸åŒçš„åˆ†åŒºèƒ½å¤Ÿè¢«æ”¾ç½®åˆ°ä¸åŒèŠ‚ç‚¹çš„æœºå™¨ä¸Šï¼Œè€Œæ•°æ®çš„è¯»å†™æ“ä½œä¹Ÿéƒ½æ˜¯é’ˆå¯¹åˆ†åŒºè¿™ä¸ªç²’åº¦è€Œè¿›è¡Œçš„ï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹çš„æœºå™¨éƒ½èƒ½ç‹¬ç«‹åœ°æ‰§è¡Œå„è‡ªåˆ†åŒºçš„è¯»å†™è¯·æ±‚å¤„ç†ã€‚å¹¶ä¸”ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥"),s("strong",[t._v("é€šè¿‡æ·»åŠ æ–°çš„èŠ‚ç‚¹æœºå™¨æ¥å¢åŠ æ•´ä½“ç³»ç»Ÿçš„ååé‡")]),t._v("ã€‚")]),t._v(" "),s("p",[t._v("æ—¥å¿—ä¸­çš„ Partition æœ‰ä»¥ä¸‹å‡ ä¸ªç”¨é€”ï¼š")]),t._v(" "),s("ul",[s("li",[t._v("é¦–å…ˆï¼Œå®ƒå®ç°äº† Kafka çš„"),s("strong",[t._v("ä¼¸ç¼©æ€§")]),t._v("ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ æ–°èŠ‚ç‚¹æ¥"),s("strong",[t._v("æ‰©å®¹")]),t._v("ã€‚")]),t._v(" "),s("li",[t._v("å…¶æ¬¡ï¼Œä¸åŒçš„åˆ†åŒºèƒ½å¤Ÿè¢«æ”¾ç½®åˆ°ä¸åŒèŠ‚ç‚¹çš„æœºå™¨ä¸Šï¼Œè€Œæ•°æ®çš„è¯»å†™æ“ä½œä¹Ÿéƒ½æ˜¯é’ˆå¯¹åˆ†åŒºè¿™ä¸ªç²’åº¦è€Œè¿›è¡Œçš„ï¼Œè¿™æ ·æ¯ä¸ªèŠ‚ç‚¹çš„æœºå™¨éƒ½èƒ½ç‹¬ç«‹åœ°æ‰§è¡Œå„è‡ªåˆ†åŒºçš„è¯»å†™è¯·æ±‚å¤„ç†ã€‚ä»è€Œæå‡ Kafka çš„"),s("strong",[t._v("ååé‡")]),t._v("ã€‚")])]),t._v(" "),s("div",{attrs:{align:"center"}},[s("img",{attrs:{src:"http://dunwu.test.upcdn.net/cs/java/javaweb/distributed/mq/kafka/kafka-producer-consumer.png",width:"640"}})]),t._v(" "),s("h2",{attrs:{id:"å‚è€ƒèµ„æ–™"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#å‚è€ƒèµ„æ–™"}},[t._v("#")]),t._v(" å‚è€ƒèµ„æ–™")]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("å®˜æ–¹")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://kafka.apache.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kakfa å®˜ç½‘"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://github.com/apache/kafka",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kakfa Github"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://kafka.apache.org/documentation/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kakfa å®˜æ–¹æ–‡æ¡£"),s("OutboundLink")],1)])])]),t._v(" "),s("li",[s("strong",[t._v("ä¹¦ç±")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://item.jd.com/12270295.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("ã€ŠKafka æƒå¨æŒ‡å—ã€‹"),s("OutboundLink")],1)])])]),t._v(" "),s("li",[s("strong",[t._v("æ•™ç¨‹")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/apachecn/kafka-doc-zh",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kafka ä¸­æ–‡æ–‡æ¡£"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://time.geekbang.org/column/intro/100029201",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kafka æ ¸å¿ƒæŠ€æœ¯ä¸å®æˆ˜"),s("OutboundLink")],1)])])]),t._v(" "),s("li",[s("strong",[t._v("æ–‡ç« ")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://hackernoon.com/thorough-introduction-to-apache-kafka-6fbf2989bbc1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Thorough Introduction to Apache Kafka"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.heartthinkdo.com/?p=2006#233",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kafka(03) Kafka ä»‹ç»"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"http://www.infoq.com/cn/articles/kafka-analysis-part-1",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kafka å‰–æï¼ˆä¸€ï¼‰ï¼šKafka èƒŒæ™¯åŠæ¶æ„ä»‹ç»"),s("OutboundLink")],1)])])])]),t._v(" "),s("h2",{attrs:{id:"ğŸšª-ä¼ é€"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ğŸšª-ä¼ é€"}},[t._v("#")]),t._v(" ğŸšª ä¼ é€")]),t._v(" "),s("p",[t._v("â—¾ ğŸ  "),s("a",{attrs:{href:"https://github.com/dunwu/bigdata-tutorial",target:"_blank",rel:"noopener noreferrer"}},[t._v("BIGDATA-TUTORIAL é¦–é¡µ"),s("OutboundLink")],1),t._v(" â—¾ ğŸ¯ "),s("a",{attrs:{href:"https://github.com/dunwu/blog",target:"_blank",rel:"noopener noreferrer"}},[t._v("æˆ‘çš„åšå®¢"),s("OutboundLink")],1),t._v(" â—¾")])])}),[],!1,null,null,null);a.default=r.exports}}]);